{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Descripci\u00f3n","text":"<ul> <li>Pr\u00e1ctica 1.3:</li> <li>Paso1: Instalar Mkdocs</li> <li>Paso2: Sitio est\u00e1tico y desplegar en Git Pages</li> <li>Pr\u00e1ctica 2.1: Web est\u00e1tica Apache</li> <li>Pr\u00e1ctica 2.2: SSL/TLS autofirmado-apache</li> <li>Pr\u00e1ctica 2.3: Instalar, configurar y securizar phpMyAdmin</li> <li>Pr\u00e1ctica 2.4: Instalar, configurar Wordpress</li> <li>Pr\u00e1ctica 2.5: Balanceo de carga con Apache</li> <li>Examen_UD2:  Implantaci\u00f3n de aplicaciones web PHP</li> <li>Pr\u00e1ctica 3.1: PHP - Formularios</li> <li>Pr\u00e1ctica 3.3: Actividad Pr\u00e1ctica de MySQL con Formularios en PHP</li> </ul>"},{"location":"Pr%C3%A1ctica%201.3/Paso1/","title":"Pr\u00e1ctica 1.3 - Instalar Mkdocs","text":"Pr\u00e1ctica 1.3"},{"location":"Pr%C3%A1ctica%201.3/Paso1/#requisitos-previos","title":"Requisitos Previos","text":"<p>Antes de empezar, me he asegurado de tener Python en el sistema. lo he verificado ejecutando:</p> <p><code>python3 --version</code></p> <p>Como no lo ten\u00eda instalado y me daban problemas las instalaci\u00f3n de pip, he decidido hacer la instalaci\u00f3n con:</p> <p><code>sudo apt install python3</code></p>"},{"location":"Pr%C3%A1ctica%201.3/Paso1/#instalar-mkdocs","title":"Instalar MkDocs","text":"<p>sudo apt install mkdocs</p> <p>Para comprobar:</p> <p><code>mkdocs --version</code></p>"},{"location":"Pr%C3%A1ctica%201.3/Paso1/#creamos-en-nuestro-github-un-repositorio-para-esta-practica","title":"Creamos en nuestro GitHub un repositorio para esta pr\u00e1ctica","text":"<p>Copiamos nuestro code en SSH para clonar en nuestro entorno local</p> <p></p> <p><code>yo-virtual$ git clone git@github.com:eduherjul/todopractica3.git</code></p> <p>Comprobamos y no posicionamos en el directorio del repositorio clonado, creando el mkdocs</p> <p></p>"},{"location":"Pr%C3%A1ctica%201.3/Paso2/","title":"Pr\u00e1ctica 1.3 - Construir el sitio est\u00e1tico y desplegar en Git Pages","text":"Pr\u00e1ctica 1.3"},{"location":"Pr%C3%A1ctica%201.3/Paso2/#construir-el-sitio-estatico","title":"Construir el Sitio Est\u00e1tico","text":"<p>Ejecutamos el siguiente comando para construir todos los archivos necesarios para tu sitio web est\u00e1tico, que se guardar\u00e1n en la carpeta site:</p> <p><code>mkdocs build</code></p> <p>Este comando genera una versi\u00f3n est\u00e1tica de tu sitio, lista para ser desplegada en GitHub Pages u otro servidor web.</p>"},{"location":"Pr%C3%A1ctica%201.3/Paso2/#desplegar-en-github-pages","title":"Desplegar en GitHub Pages","text":"<p>Para desplegar los archivos est\u00e1ticos en GitHub Pages desde un repositorio de GitHub, seguiremos estos pasos:</p> <ul> <li>Configurar GitHub Pages</li> </ul> <p>Nos aseguraremos de que GitHub Pages est\u00e9 configurado para usar la rama gh-pages. Esta configuraci\u00f3n es necesaria para que tu sitio web est\u00e9 disponible en una URL p\u00fablica. Para ello:</p> <ul> <li>Navega a la pesta\u00f1a Settings (Configuraci\u00f3n).</li> <li>En el men\u00fa de la izquierda, selecciona Pages.</li> <li>En Source (Fuente), selecciona gh-pages como la rama y la carpeta docs.</li> <li>Guarda los cambios.</li> </ul> <p></p> <p>Desplegar los en GitHub Pages Usamos el siguiente comando para desplegar tu sitio:</p> <p><code>mkdocs gh-deploy</code></p> <p>Este comando construir\u00e1 tu sitio y lo subir\u00e1 a la rama gh-pages de tu repositorio de GitHub, haciendo que tu documentaci\u00f3n est\u00e9 disponible en https://tu-usuario.github.io/user-guid</p> <p>Con estos pasos, tu documentaci\u00f3n estar\u00e1 desplegada y accesible en GitHub Pages.</p> <p>Cada vez que deseemos actualizar tu sitio en GitHub Pages con nuevos cambios, deberemos ejecutar mkdocs gh-deploy* manualmente. Esto asegura que los cambios en nuestra documentaci\u00f3n local se reflejen en el sitio web desplegado</p>"},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/","title":"Pr\u00e1ctica 2.1 - Implantaci\u00f3n de una web est\u00e1tica con Apache en markdown","text":"Pr\u00e1ctica 2.1 <p>Vamos construir en nuestro servidor web apache dos sitios web con las siguientes caracter\u00edsticas:</p> <ul> <li>El nombre de dominio del primero ser\u00e1 <code>www.iaw2425.org</code>, su directorio base ser\u00e1 /<code>home/yo/Documentos/iaw2424</code> y contendr\u00e1 una p\u00e1gina llamada <code>index.html</code>, donde s\u00f3lo se ver\u00e1 una bienvenida a la p\u00e1gina del m\u00f3dulo IAW. Este sitio lo configuraremos para acceder a el desde el <code>puerto 3380</code></li> <li>En el segundo sitio vamos a crear una p\u00e1gina donde se pondr\u00e1 la documentaci\u00f3n del m\u00f3dulo, el nombre de este sitio ser\u00e1 <code>www.docu-iaw2425.org</code>, y su directorio base ser\u00e1 <code>/home/yo/M\u00fasica/docu-iaw2425/site/</code>. En esta p\u00e1gina se pondr\u00e1 la documentaci\u00f3n del m\u00f3dulo IAW generada con mkdocs. Copiaremos s\u00f3lo el contenido del directorio site de la documentaci\u00f3n generada, ya que es contenido est\u00e1tico.. Este sitio lo configuraremos para acceder a \u00e9l desde el <code>puerto 4480</code></li> </ul>"},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#1-creamos-los-dos-directorios-de-los-sitios","title":"1.- Creamos los dos directorios de los sitios","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#2-copiamos-el-fichero-por-defecto-000-defaultconf-para-dos-sitios-virtuales","title":"2.- Copiamos el fichero por defecto 000-default.conf para dos sitios virtuales","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#3-configuramos-el-sitio-apache-para-el-primer-lugar","title":"3.- Configuramos el sitio apache para el primer lugar","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#4-verificamos-la-sintaxis","title":"4.- Verificamos la sintaxis","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#5-creamos-el-contenido-de-la-pagina-de-bienvenida-del-primer-sitio","title":"5.- Creamos el contenido de la p\u00e1gina de bienvenida del primer sitio","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#configuramos-apache-para-escuchar-por-los-puertos-3380-para-el-primer-sitio-y-4480-para-el-segundo-sitio","title":"Configuramos apache para escuchar por los puertos <code>3380</code> para el primer sitio y <code>4480</code> para el segundo sitio","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#7-habilitamos-y-recargamos-el-primer-sitio-apache","title":"7.- Habilitamos y recargamos el primer sitio apache","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#8-creamos-el-contenido-de-la-pagina-de-bienvenida-del-segundo-sitio","title":"8.- Creamos el contenido de la p\u00e1gina de bienvenida del segundo sitio","text":"<p><code>Copiamos la carpeta site desde la ubicaci\u00f3n donde la tenemos a ~/M\u00fasica/docu-iaw2425</code></p> <p></p> <p></p>"},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#9-configuramos-el-sitio-apache-para-el-segundo-lugar","title":"9.- Configuramos el sitio apache para el segundo lugar","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#10-verificamos-la-sintaxis","title":"10.- Verificamos la sintaxis","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#11-habilitamos-y-recargamos-el-segundo-sitio-apache","title":"11.- Habilitamos y recargamos el segundo sitio apache","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#12-agregamos-estas-lineas-en-el-archivo-etchosts-para-las-pruebas","title":"12.- Agregamos estas l\u00edneas en el archivo /etc/hosts para las pruebas","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#13-asignar-los-permisos-correctos-para-el-usuario-www-data","title":"13.- Asignar los permisos correctos para el usuario www-data","text":""},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#14-permisos-adicionales","title":"14.- Permisos adicionales","text":"<p>Al estar fuera del directorio <code>/var/www</code> en mi caso debo ajustar los permisos para que apache pueda acceder a ellos, por lo que dar\u00e9 adem\u00e1s permisos a los directorios que apache necesita atravesar, por que sino me da error de permisos:</p> <p></p>"},{"location":"Pr%C3%A1ctica%202.1/Pr%C3%A1ctica-2.1/#15-abrimos-el-navegador-y-verificamos-que-los-sitios-funcionen","title":"15.- Abrimos el navegador y verificamos que los sitios funcionen","text":"<p>Para el primer sitio: http://www.iaw2425.org:3380</p> <p></p> <p>Para el segundo sitio: http://www.docu-iaw2425.org:4480</p> <p></p>"},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/","title":"Apache Pr\u00e1ctica 2.2 Certificado SSL/TLS","text":""},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/#paso-1","title":"PASO 1","text":""},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/#instalacion-del-conjunto-de-sofware-lamp","title":"Instalaci\u00f3n del conjunto de sofware LAMP","text":"Un script de instalaci\u00f3n de LAMP automatiza la instalaci\u00f3n y configuraci\u00f3n de los componentes esenciales de la pila LAMP (Linux, Apache, MySQL, PHP) en un sistema Linux, evitando que tengas que ejecutar manualmente cada comando. Este script realiza todas las acciones necesarias, como la actualizaci\u00f3n del sistema, la instalaci\u00f3n de paquetes, la configuraci\u00f3n de servicios.   <p>** Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p> <p>Lo comprobamos con las versiones:</p> <p></p>"},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/#paso-2","title":"PASO 2","text":""},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/#automatizamos-la-creacion-de-un-certificado-autofirmado-mediante-un-script","title":"Automatizamos la creaci\u00f3n de un certificado autofirmado mediante un script","text":"Un certificado autofirmado nos permite cifrar la comunicaci\u00f3n entre el cliente y el servidor, lo cual es crucial para proteger datos sensibles, especialmente en entornos de desarrollo y pruebas. Automatizar el proceso de creaci\u00f3n ahorra tiempo y esfuerzo. Al ejecutar un script, se pueden generar los archivos necesarios sin tener que realizar cada paso manualmente.   <p>** Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p> <p>Lo comprobamos: - Consultando la informaci\u00f3n del sujeto del cetificado y la fecha de caducidad</p> <p></p>"},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/#paso-3","title":"PASO 3","text":""},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/#configuramos-un-virtualhost-con-ssltsl-en-el-servidor-apache-mediante-un-script-combinado-que-nos-crea-las-dos-configuraciones","title":"Configuramos un VirtualHost con SSL/TSL en el servidor Apache mediante un script combinado que nos crea las dos configuraciones.","text":"<p>En nuestro caso , utilizaremos el script que nos crear\u00e1 un fichero xxx-ssl.conf en: <code>/etc/apache2/sites-available/xxx-ssl.conf</code> </p> <p>Nos habilitar\u00e1 el virtual host que acabamos de configurar y el m\u00f3dulo SSL en Apache.</p>"},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/#configuramos-el-virtual-host-de-http-para-que-redirija-todo-el-trafico-a-https-con-el-mismo-script","title":"Configuramos el virtual host de HTTP para que redirija todo el tr\u00e1fico a HTTPS con el mismo script","text":"<p>En nuestro caso, el virtual host que maneja las peticiones HTTP est\u00e1 en el archivo de configuraci\u00f3n que utiliza Apache por defecto para el puerto 80  y el mismo script nos crear\u00e1 un fichero:</p> <p><code>/etc/apache2/sites-available/xxxx.conf.</code> </p> <p>El script nos habilitar\u00e1 el m\u00f3dulo rewrite en apache y reinicir\u00e1 el servicio.</p> <p>** Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p> <p>Comprobamos los sitios creados en <code>/etc/apache/sites-available</code></p> <p></p> <p>Vemos los contenidos que nos ha creado el script autom\u00e1ticamente.</p> <p> </p> <p>Comprobamos los sitios creados en <code>/etc/apache/sites-enable</code></p> <p></p> <p>Vemos el contenido que nos ha creado el script autom\u00e1ticamente.</p> <p></p>"},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/#paso-4","title":"PASO 4","text":""},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/#reiniciamos-el-servicio-lo-comprobamos-y-verificamos-los-puertos-que-tenemos-abiertos-en-las-reglas-de-nuestro-firewall","title":"Reiniciamos el servicio lo comprobamos y verificamos los puertos que tenemos abiertos en las reglas de nuestro firewall.","text":"<p>Borramos el index.html por default y creamos uno personalizado para hacer las pruebas.</p> <p> </p> <p>Comprobamos despu\u00e9s de volver a reiniciar Apache que podemos acceder a ella desde un navegador web.</p> <p></p>"},{"location":"Pr%C3%A1ctica%202.2/Documento-t%C3%A9cnico/#esquema-de-la-estructura-del-repositorio","title":"ESQUEMA DE LA ESTRUCTURA DEL REPOSITORIO","text":""},{"location":"Pr%C3%A1ctica%202.2/Instalacion-LAMP/","title":"Instalacion LAMP","text":"<pre><code>#!/bin/bash\n\n#############################################\necho \"Script para automatizar la instalaci\u00f3n de LAMP para Debian/Ubuntu o derivados\"\necho \"Apache\"\necho \"MySQL\"\necho \"PHP\"\n\n#############################################\n#Actualizaci\u00f3n de sistema####################\n\necho \"Actualizando el sistema..\"\nsudo apt update -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y\n#Instalaci\u00f3n de Apache#######################\n\necho \"Instalando apache..\"\nsudo apt install apache2 -y\n#Instalaci\u00f3n de PHP##########################\n\necho \"Instalando PHP..\"\nsudo apt install php libapache2-mod-php php-mysql -y\n\n#Instalaci\u00f3n MySQL###########################\n\necho \"Instalando MySQL-server..\"\nsudo apt install mysql-server -y\n\n#Reinicio del servicio apache##############\n\necho \"Reiniciando apache..\"\nsudo systemctl restart apache2.service\nsudo systemctl --no-pager status apache2.service\nsudo ufw enable\nsudo ufw allow in \"Apache Full\"\nsudo ufw allow 22\nsudo ufw status\n\necho \"--------------AUTOR  EDU-----------------\"\n\nexit 0\n</code></pre>"},{"location":"Pr%C3%A1ctica%202.2/setup-certificado-firmado/","title":"Setup certificado firmado","text":"<pre><code>#!/bin/bash\nset -x\n\n# Configuramos las variables con los datos que necesita el certificado\nOPENSSL_COUNTRY=\"ES\"\nOPENSSL_PROVINCE=\"Valencia\"\nOPENSSL_LOCALITY=\"Tavernes de la Valldigna\"\nOPENSSL_ORGANIZATION=\"Eduardo Hern\u00e1ndez Juli\u00e1\"\nOPENSSL_ORGUNIT=\"Departamento de Informatica\"\nOPENSSL_COMMON_NAME=\"practica-https.local\"\nOPENSSL_EMAIL=\"udexeraco@hotmail.com\"\n\n# Creamos el certificado autofirmado\n\nsudo openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/ssl/private/apache-selfsigned.key -out /etc/ssl/certs/apache-selfsigned.crt -subj \"/C=$OPENSSL_COUNTRY/ST=$OPENSSL_PROVINCE/L=$OPENSSL_LOCALITY/O=$OPENSSL_ORGANIZATION/OU=$OPENSSL_ORGUNIT/CN=$OPENSSL_COMMON_NAME/emailAddress=$OPENSSL_EMAIL\"\n</code></pre>"},{"location":"Pr%C3%A1ctica%202.2/ssl-conf_.conf/","title":"Ssl conf .conf","text":"<pre><code>#!/bin/bash\n\n#Script para configurar un nuevo archivo en /etc/apache2/sites-available/xxx-ssl.conf\n#Script para configurar un nuevo archivo en /etc/apache2/sites-available/xxx.conf\n\n#Instalaci\u00f3n de dialog\nsudo apt install dialog -y\n\n#Funci\u00f3n para capturar el c\u00f3digo de retorno del di\u00e1logo\nfunction acabar() {\n  exit_status=$?\n  # Verificar si se seleccion\u00f3 \"Cancelar\"\n  if [ $exit_status -ne 0 ]; then\n    clear\n    echo \"Operaci\u00f3n cancelada\"\n    exit 1\n  fi\n}\n\n#Configurar ssl.conf\ndialog --title \"SSL/TSL\" \\\n  --yesno \"\u00bfQuieres crear un archivo de configuraci\u00f3n HTTPS?\" 0 0\nsino=$?\n\nif [ \"$sino\" -eq 0 ]; then\n\n  #Introducimos el nombre del fichero ssl.conf\n  nomssl=$(dialog --title \"Configuramos un nuevo /etc/apache2/sites-available/xxx-ssl.conf\" \\\n    --stdout \\\n    --inputbox \"Nombre del archivo\" 0 0)\n  #Llamo a la funci\u00f3n:\n  acabar\n\n  #configuramos un nuevo ssl.conf\n  echo \"&lt;IfModule mod_ssl.c&gt;\n        &lt;VirtualHost *:443&gt;\n                #ServerName practica-https.local\n                DocumentRoot /var/www/html\n                DirectoryIndex index.php index.html\n                ErrorLog ${APACHE_LOG_DIR}/error.log\n                CustomLog ${APACHE_LOG_DIR}/access.log combined\n                SSLEngine on\n                SSLCertificateFile /etc/ssl/certs/apache-selfsigned.crt\n                SSLCertificateKeyFile /etc/ssl/private/apache-selfsigned.key\n        &lt;/VirtualHost&gt;\n&lt;/IfModule&gt;\" | sudo tee /etc/apache2/sites-available/\"$nomssl\"-ssl.conf\n\n  #Habilitamos el virtual host que acabamos de configurar.\n  sudo a2ensite \"$nomssl\"-ssl.conf\n\n  #Habilitamos el m\u00f3dulo SSL en Apache.\n  sudo a2enmod ssl\n\nfi\n\n#Configurar .conf\ndialog --title \"HTTP\" \\\n  --yesno \"\u00bfQuieres crear un archivo de configuraci\u00f3n HTTP?\" 0 0\nsino=$?\n\nif [ \"$sino\" -eq 0 ]; then\n\n  #Introducimos el nombre del fichero ssl.conf\n  nomhttp=$(dialog --title \"Configuramos un nuevo /etc/apache2/sites-available/xxx.conf\" \\\n    --stdout \\\n    --inputbox \"Nombre del archivo\" 0 0)\n  #Llamo a la funci\u00f3n:\n  acabar\n\n  #configuramos un nuevo .conf\n  echo \"&lt;VirtualHost *:80&gt;\n    #ServerName practica-https.local\n    DocumentRoot /var/www/html\n    #Redirige al puerto 443 (HTTPS)\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n    RewriteEngineOn\n    RewriteCond%{HTTPS} off\n    RewriteRule^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]\n&lt;/VirtualHost&gt;\" | sudo tee /etc/apache2/sites-available/\"$nomhttp\".conf\n\n  #Para que servidor web Apache pueda hacer redirecci\u00f3n de HTTP a HTTPS habilitamos m\u00f3dulo rewrite (Apache).\n  sudo a2enmod rewrite\n\n  #Reiniciamos el servicio de Apache\n  sudo systemctl restart apache2.service\n\n  #Comprobamos:\n  clear\n  sudo systemctl status apache2.service\n  read -p \"ENTER para continuar\"\n\nfi\n\n#Comprobar que el puerto 443 est\u00e1 abierto en las reglas del firewall para permitir el tr\u00e1fico HTTPS.\ndialog --title \"En las reglas de Firewall (sudo ufw status)\" \\\n  --msgbox \"Comprobar que el puerto 443 est\u00e1 abierto para tr\u00e1fico HTTPS\" 5 60\n\nclear\nexit 0\n</code></pre>"},{"location":"Pr%C3%A1ctica%202.3/Documento-informacion/","title":"PHP Pr\u00e1ctica 2.3: Instalar, configurar y securizar phpMyAdmin","text":""},{"location":"Pr%C3%A1ctica%202.3/Documento-informacion/#paso-1","title":"PASO 1","text":""},{"location":"Pr%C3%A1ctica%202.3/Documento-informacion/#instalacion-del-conjunto-de-sofware-lamp","title":"Instalaci\u00f3n del conjunto de sofware LAMP","text":"Un script de instalaci\u00f3n de LAMP automatiza la instalaci\u00f3n y configuraci\u00f3n de los componentes esenciales de la pila LAMP (Linux, Apache, MySQL, PHP) en un sistema Linux, evitando que tengas que ejecutar manualmente cada comando. Este script realiza todas las acciones necesarias, como la actualizaci\u00f3n del sistema, la instalaci\u00f3n de paquetes, la configuraci\u00f3n de servicios.   <p>** Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p> <p>Lo comprobamos con las versiones:</p> <p></p> <p>Comprobamos el estado de apache y ajustamos la configuraci\u00f3n del firewall:</p> <p></p> <p>Comprobamos en el navegador que tambi\u00e9n nos funciona:</p> <p></p> <p>Ahora vamos a ver la p\u00e1gina web predeterminada de PHP: Creamos un archivo con el nombre veo.php</p> <p><code>echo \"&lt;?php phpinfo();\" | sudo tee /var/www/html/veo.php</code></p> <p>Para probarlo nos vamos a muestro navegador web y accedemos al nombre de dominio o direcci\u00f3n IP de nuestro servidor, seguido del nombre del script, que en nuestro caso es <code>veo.php</code>:</p> <p></p>"},{"location":"Pr%C3%A1ctica%202.3/Documento-informacion/#paso-2","title":"PASO 2","text":""},{"location":"Pr%C3%A1ctica%202.3/Documento-informacion/#automatizamos-la-instalacion-y-configuracion-de-phpmyadmin-mediante-un-script","title":"Automatizamos la instalaci\u00f3n y configuraci\u00f3n de PhpMyAdmin mediante un script","text":"Automatizar la instalaci\u00f3n y configuraci\u00f3n de PhpMyAdmin mediante un script proporciona eficiencia, consistencia, seguridad y escalabilidad, lo que es extremadamente \u00fatil para administradores de sistemas y equipos de desarrollo que gestionan m\u00faltiples entornos o despliegues frecuentes."},{"location":"Pr%C3%A1ctica%202.3/Documento-informacion/#en-este-script-nos-realiza-las-siguientes-tareas-automaticamente","title":"En este script nos realiza las siguientes tareas autom\u00e1ticamente","text":"<ul> <li> <p>Nos instala phpMyAdmin     1-  Instala phpMyAdmin junto con las extensiones PHP necesarias <code>(php-mbstring,   php-zip, php-gd, php-json, php-curl).</code></p> <p>2- Configura phpMyAdmin para que funcione con Apache.</p> <p></p> <p></p> <p>3- Habilita la extensi\u00f3n <code>mbstring</code> y reinicia Apache.</p> </li> <li> <p>Nos configura autom\u00e1ticamente el acceso por contrase\u00f1a para la cuenta root de MySQL</p> <p>1- Cambia el m\u00e9todo de autenticaci\u00f3n del usuario root de MySQL de auth_socket a <code>caching_sha2_password.</code></p> </li> <li> <p>Nos configura tambi\u00e9n el acceso por contrase\u00f1a para un usuario dedicado de MySQL</p> <p>1- Crea un <code>nuevo usuario de MySQL</code> con una contrase\u00f1a segura.</p> <p></p> <p>2- Otorga al nuevo usuario los <code>privilegios</code> apropiados para gestionar las bases de datos a trav\u00e9s de phpMyAdmin.</p> <p></p> </li> <li> <p>Nos asegurando nuestra Instancia de phpMyAdmin</p> <p>1- Habilita el uso de sobrescrituras de archivos <code>.htaccess</code> en la configuraci\u00f3n de Apache para phpMyAdmin.</p> <p></p> <p>2- Crea un archivo <code>.htaccess</code> en el directorio de phpMyAdmin para implementar autenticaci\u00f3n b\u00e1sica.</p> <p></p> <p>3- Crea un archivo .<code>htpasswd</code> para almacenar las credenciales de usuario y contrase\u00f1a.</p> <p></p> <p>4- Reinicia Apache para aplicar los cambios.</p> </li> </ul> <p>** Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p> <p>Vemos el primer control de acceso para phpMyAdmin</p> <p></p> <p>Ahora el segundo y habitual</p> <p></p> <p>Finalmente estamos dentro para gestionar nuestras BBDD</p> <p></p>"},{"location":"Pr%C3%A1ctica%202.3/Instalacion-LAMP/","title":"Instalacion LAMP","text":"<pre><code>#!/bin/bash\n\n#############################################\necho \"Script para automatizar la instalaci\u00f3n de LAMP para Debian/Ubuntu o derivados\"\necho \"Apache\"\necho \"MySQL\"\necho \"PHP\"\n\n#############################################\n#Actualizaci\u00f3n de sistema####################\n\necho \"Actualizando el sistema..\"\nsudo apt update -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y\n#Instalaci\u00f3n de Apache#######################\n\necho \"Instalando apache..\"\nsudo apt install apache2 -y\n#Instalaci\u00f3n de PHP##########################\n\necho \"Instalando PHP..\"\nsudo apt install php libapache2-mod-php php-mysql -y\nsudo apt install php-cli php-cgi php-mysql php-pgsql -y\n\n#Instalaci\u00f3n MySQL###########################\n\necho \"Instalando MySQL-server..\"\nsudo apt install mysql-server -y\n\n#Reinicio del servicio apache y comprobaci\u00f3n del estado##############\n\necho \"Reiniciando apache..\"\nsudo systemctl restart apache2.service\nsudo systemctl --no-pager status apache2.service\nsudo ufw enable\nsudo ufw allow in \"Apache Full\"\nsudo ufw allow 22\nsudo ufw status\n\necho \"--------------AUTOR  EDU-----------------\"\nexit 0\n</code></pre>"},{"location":"Pr%C3%A1ctica%202.3/phpmyadmin-script/","title":"Phpmyadmin script","text":"<pre><code>#!/bin/bash\n\n#Script para automatizar la instalaci\u00f3n y configuraci\u00f3n de PhpMyAdmin.\n\n#Instalaci\u00f3n de dialog\nsudo apt install dialog -y\n\n#Funci\u00f3n para capturar el c\u00f3digo de retorno del di\u00e1logo\nfunction acabar() {\n  exit_status=$?\n  # Verificar si se seleccion\u00f3 \"Cancelar\"\n  if [ $exit_status -ne 0 ]; then\n    clear\n    echo \"Operaci\u00f3n cancelada\"\n    exit 1\n  fi\n}\n\n#Actualizamos la memoria cach\u00e9 del sistema\nsudo apt update -y\n\n#Instalamos estos paquetes\nsudo apt install phpmyadmin php-mbstring php-zip php-gd php-json php-curl -y\n\n#Cambiamos la contrase\u00f1a del usuario root de mysql-server\npasswdmysqlroot=$(dialog --title \"Contrase\u00f1a para root en mysql\" \\\n    --stdout \\\n    --inputbox \"Password (8 carac.mayus-minus-n\u00fam-signo)\" 0 50)\n  #Llamo a la funci\u00f3n:\n  acabar\n\nsqlcomandos=\"alter user 'root'@'localhost' identified with caching_sha2_password by '$passwdmysqlroot';\nflush privileges;\"\n\n#Ejecutamos los comandos SQL en mysql\nsudo mysql -u root -e \"$sqlcomandos\"\n\n#Habilitar la extensi\u00f3n PHP mbstring\necho \"Activando extensiones de PHP...\"\nsudo phpenmod mbstring\n\n#Reiniciamos Apache\nsudo systemctl restart apache2\n\n#Generamos un nuevo usuario y una contrase\u00f1a en mysql-server para phpmyadmin\nusuariophp=$(dialog --title \"Nuevo usuario para mysql\" \\\n    --stdout \\\n    --inputbox \"Nombre\" 0 0)\n  #Llamo a la funci\u00f3n:\n  acabar\n\npasswdmysqlphp=$(dialog --title \"Contrase\u00f1a para el nuevo usuario\" \\\n    --stdout \\\n    --inputbox \"Password (8 carac.mayus-minus-n\u00fam-signo)\" 0 50)\n  #Llamo a la funci\u00f3n:\n  acabar\n\n#Ahora creamos un nuevo usuario para el acceso a phpmyadmin\nsqlcomandosphp=\"create user '$usuariophp'@'localhost' identified with caching_sha2_password by '$passwdmysqlphp';\nGRANT ALL PRIVILEGES ON *.* TO '$usuariophp'@'localhost';\nflush privileges;\"\n\n#Ejecutamos los comandos SQL en mysql\nsudo mysql -u root -p\"$passwdmysqlroot\" -e \"$sqlcomandosphp\"\n\n#Habilitamos el uso de anulaciones del archivo .htaccess\n#Agregamos la directiva \"AllowOverride All\" dentro de la secci\u00f3n \"&lt;Directory /usr/share/phpmyadmin&gt;\"\u200b\u200b\u200b del archivo de configuraci\u00f3n.\nsudo sed -i '7a\\    AllowOverride All' /etc/apache2/conf-available/phpmyadmin.conf\n\n#Habilitamos y reiniciamos apache\nsudo a2enconf phpmyadmin\nsudo systemctl restart apache2.service\n\n#Habilitado el uso de .htaccess para la aplicaci\u00f3n, debemos crear uno para implementar seguridad.\n#El archivo lo crearemos dentro del directorio de la aplicaci\u00f3n.\necho \"AuthType Basic\nAuthName \\\"Restricted Files\\\"\nAuthUserFile /etc/phpmyadmin/.htpasswd\nRequire valid-user\" | sudo tee /usr/share/phpmyadmin/.htaccess\n\n#La ubicaci\u00f3n que hemos seleccionado para el archivo de contrase\u00f1a es /etc/phpmyadmin/.htpasswd. \n#Ahora podemos crear este archivo y pasarle un usuario inicial con la utilidad htpasswd:\nusuario=$(dialog --title \"Datos para el archivo .htpasswd\" \\\n    --stdout \\\n    --inputbox \"Nombre del usuario\" 0 0)\n  #Llamo a la funci\u00f3n:\n  acabar\n\n#Aseguramos la instancia de phpMyAdmin y reiniciamos\nsudo htpasswd -c /etc/phpmyadmin/.htpasswd \"$usuario\"\nsudo systemctl restart apache2.service\n\n#Accedemos a la interfaz web  (navegador):\n#Visitando la direcci\u00f3n IP p\u00fablica de nuestro servidor, con /phpmyadmin agregado al final.\nip=$(hostname -I)\ndialog --title \"Usuario de la cuenta y la contrase\u00f1a adicional que hemos configurado\" \\\n  --backtitle \"En el acceso a phpMyAdmin, nos solicitar\u00e1:\"\\\n  --msgbox \"En nuestro navegador pondremos todo seguido: $ip/phphmyadmin\" 0 70\nclear\nexit 0\n</code></pre>"},{"location":"Pr%C3%A1ctica%202.4/Apache-wordpress-php/","title":"Apache wordpress php","text":"<pre><code>#!/bin/bash\n\n#Script para instalar y configurar Wordpress con Apache y PHP\n\n#Instalaci\u00f3n de dialog\nsudo apt install dialog -y\n\n#Funci\u00f3n para capturar el c\u00f3digo de retorno del di\u00e1logo\nfunction acabar() {\n  exit_status=$?\n  # Verificar si se seleccion\u00f3 \"Cancelar\"\n\n\n  if [ $exit_status -ne 0 ]; then\n    clear\n    echo \"Operaci\u00f3n cancelada\"\n    exit 1\n  fi\n}\n\n#Actualizamos el sistema\ndialog --title \"Actualizaci\u00f3n del sistema update-upgrade\" \\\n  --yesno \"\u00bfActualizamos?\" 0 0\nsino=$?\nif [ $sino -eq 0 ]; then\n  clear\n  sudo apt update -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y\nfi\n\nclear\n\n#Instalaci\u00f3n de Apache\nsudo apt install apache2 -y\nsudo apt install ghostscript -y\n\n#Instalaci\u00f3n de PHP\necho \"Instalando PHP..\"\nsudo apt install libapache2-mod-php \\\n  php \\\n  php-bcmath \\\n  php-curl \\\n  php-imagick \\\n  php-intl \\\n  php-json \\\n  php-mbstring \\\n  php-mysql \\\n  php-xml \\\n  php-zip -y\n\n#Instalaci\u00f3n Wordpress\ncd /tmp || exit\nwget https://wordpress.org/latest.tar.gz\ntar -xzf latest.tar.gz\nsudo mv wordpress /var/www/html/\n\n#Reinicio del servicio apache y comprobaci\u00f3n del estado\necho \"Reiniciando apache..\"\nsudo systemctl restart apache2.service\nsudo systemctl --no-pager status apache2.service\nsudo ufw enable\nsudo ufw allow in \"Apache Full\"\nsudo ufw allow 22\nsudo ufw allow 3306\nsudo ufw status\n\n#Cambiamos la propiedad y permisos de los archivos\nsudo chown -R www-data:www-data /var/www/html/wordpress\nsudo chmod -R 755 /var/www/html/wordpress\n\n#Configurar WordPress para conectarse a la base de datos\ncd /var/www/html/wordpress || exit\n\n#copiamos el archivo de configuraci\u00f3n\ncp wp-config-sample.php wp-config.php\n\n#Introducimos el nombre del usuario de la BBDD\nnomuser=$(dialog --title \"Usuario de la BBDD\" \\\n  --stdout \\\n  --inputbox \"Nombre\" 0 0)\n#Llamo a la funcion:\nacabar\n\n#Introducimos el password\npasswd=$(dialog --title \"Contrase\u00f1a de acceso a la BBDD\" \\\n  --stdout \\\n  --inputbox \"Password\" 0 0)\n#Llamo a la funcion:\nacabar\n\n#Introducimos la IP del sevidor mysql de la BBDD\nipmysql=$(dialog --title \"Servidor mysql de la BBDD \" \\\n  --stdout \\\n  --inputbox \"IP\" 0 0)\n#Llamo a la funcion:\nacabar\n\n#Establecemos las credenciales de la BBDDE en el archivo de configuraci\u00f3n wp-config.php:\nsudo -u www-data sed -i \"23s/.*/DEFINE( 'DB_NAME', 'wordpress_db' )/\" /var/www/html/wordpress/wp-config.php\nsudo -u www-data sed -i \"26s/.*/DEFINE( 'DB_USER', '$nomuser' )/\" /var/www/html/wordpress/wp-config.php\nsudo -u www-data sed -i \"29s/.*/DEFINE( 'DB_PASSWORD', '$passwd' )/\" /var/www/html/wordpress/wp-config.php\nsudo -u www-data sed -i \"32s/.*/DEFINE( 'DB_HOST', '$ipmysql' )/\" /var/www/html/wordpress/wp-config.php\n\n#creamos un archivo de configuraci\u00f3n para el sitio de Wordpress en Apache\necho \"&lt;VirtualHost *:80&gt;\n        ServerAdmin admin@edu.com\n        DocumentRoot /var/www/html/wordpress\n        ServerName edu.com\n        &lt;Directory /var/www/html/wordpress&gt;\n            Options Indexes FollowSymLinks\n            AllowOverride All\n            Require all granted\n        &lt;/Directory&gt;\n        ErrorLog ${APACHE_LOG_DIR}/error.log\n        CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\" | sudo tee /etc/apache2/sites-available/wordpress.conf\n\n#Habilitamos el nuevo sitio de WordPress y el m\u00f3dulo de reescritura de Apache:\nsudo a2ensite wordpress.conf\nsudo a2enmod rewrite\n\n#Deshabilitamos el sitio predeterminado \u201cIt Works\u201d con:\nsudo a2dissite 000-default\n\n#Reiniciamos Apache para aplicar los cambios:\nsudo systemctl restart apache2.service\n\n#Comprobamos el estado\nsudo systemctl status apache2\n\nexit 0\n</code></pre>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/","title":"Pr\u00e1ctica 2.4 Instalar y configurar Wordpress","text":""},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#paso-1-configurar-el-servidor-2-mysql","title":"PASO 1: Configurar el Servidor 2 (Mysql)","text":""},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#actualizar-el-sistema-e-instalar-mysql","title":"Actualizar el sistema e instalar Mysql","text":"<p><code>sudo apt update &amp;&amp; sudo apt upgrade -y</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#instalar-mysql","title":"Instalar Mysql","text":"<p><code>sudo apt install mysql-server</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#acceder-a-mysql-como-administrador-root","title":"Acceder a Mysql como administrador root","text":"<p><code>sudo mysql -u root</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#crear-la-bbdd","title":"Crear la BBDD","text":"<p><code>CREATE DATABASE wordpress_db;</code></p> <p><code>CREATE USER 'wp_user'@'%' IDENTIFIED BY 'tu_contrase\u00f1a_segura';</code></p> <p><code>GRANT ALL PRIVILEGES ON wordpress_db.* TO 'wp_user'@'%';</code></p> <p><code>FLUSH PRIVILEGES;</code></p> <p><code>EXIT;</code></p> <p></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#permitiremos-las-conexiones-remotas","title":"Permitiremos las conexiones remotas","text":"<p><code>sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf</code></p> <p>Buscaremos la l\u00ednea que contiene <code>bind-address</code> y la cambiaremos de <code>127.0.0.1</code> a <code>0.0.0.0</code> para permitir conexiones desde cualquier direcci\u00f3n IP.</p> <p></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#reiniciaremos-mysql","title":"Reiniciaremos Mysql","text":"<p><code>sudo systemctl restart mysql</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#abriremos-el-puerto-mysql-3306-en-el-firewall","title":"Abriremos el puerto Mysql (3306) en el firewall","text":"<p><code>sudo ufw allow 3306</code></p> <p></p> <p>De esta forma, con un script descargamos mysql y el servidor queda listo para soportar una instalaci\u00f3n de WordPress, con acceso remoto a la BBDD si es necesario.</p> <p>Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#paso-2-instalar-apache-php-las-extensiones-necesarias-y-descargar-e-instalar-wordpress","title":"PASO 2: Instalar Apache, PHP, las extensiones necesarias y descargar e instalar Wordpress","text":""},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#instalamos-apache-que-sera-el-servidor-web-donde-se-alojara-wordpress","title":"Instalamos Apache que ser\u00e1 el servidor web donde se alojar\u00e1 Wordpress","text":"<p><code>sudo apt install apache2 -y</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#instalamos-php-y-las-extensiones-necesarias","title":"Instalamos PHP y las extensiones necesarias","text":"<p><code>sudo apt update</code></p> <p><code>sudo apt install apache2 ghostscript libapache2-mod-php</code></p> <p><code>sudo apt install php php-bcmath php-curl php-imagick php-intl</code></p> <p><code>sudo apt install php-json php-mbstring php-mysql php-xml php-zip</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#reiniciamos-apache-para-que-los-cambios-surtan-efecto","title":"Reiniciamos apache para que los cambios surtan efecto","text":"<p><code>sudo systemctl restart apache2.service</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#descargamos-la-ultima-version-de-wordpress-y-colocamos-en-la-carpeta-web-de-apache","title":"Descargamos la \u00faltima versi\u00f3n de WordPress y colocamos en la carpeta web de Apache","text":"<p><code>cd /tmp</code></p> <p><code>wget https://wordpress.org/latest.tar.gz</code></p> <p><code>tar -xzf latest.tar.gz</code></p> <p><code>sudo mv wordpress /var/www/html/</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#cambiamos-la-propiedad-y-permisos-de-los-archivos","title":"Cambiamos la propiedad y permisos de los archivos","text":"<p><code>sudo chown -R www-data:www-data /var/www/html/wordpress</code></p> <p><code>sudo chmod -R 755 /var/www/html/wordpress</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#configurar-wordpress-para-conectarse-a-la-base-de-datos","title":"Configurar WordPress para conectarse a la base de datos","text":"<p><code>cd /var/www/html/wordpress</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#copiamos-el-archivo-de-configuracion","title":"Copiamos el archivo de configuraci\u00f3n","text":"<p><code>cp wp-config-sample.php wp-config.php</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#editamos-el-archivo-de-configuracion-de-wordpress","title":"Editamos el archivo de configuraci\u00f3n de WordPress","text":"<p><code>sudo nano wp-config.php</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#cambiamos-las-siguientes-lineas-para-apuntar-al-servidor-2-mysql-en-lugar-de-usar-localhost","title":"Cambiamos las siguientes l\u00edneas para apuntar al \"Servidor 2\" (MySQL) en lugar de usar \"localhost\"","text":"<p><code>define('DB_NAME', 'wordpress_db');     // Nombre de la base de datos</code></p> <p><code>define('DB_USER', 'wp_user');          // Usuario de la base de datos</code></p> <p><code>define('DB_PASSWORD', 'tu_contrase\u00f1a_segura'); // Contrase\u00f1a del usuario</code></p> <p><code>define('DB_HOST', 'IP_DEL_SERVIDOR_2'); // La IP del Servidor 2 (donde est\u00e1 MySQL)</code></p> <p></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#configuramos-apache-para-wordpress-creando-un-archivo-de-configuracion-para-el-sitio-de-wordpress-en-apache","title":"Configuramos Apache para WordPress creando un archivo de configuraci\u00f3n para el sitio de WordPress en Apache","text":"<p><code>sudo nano /etc/apache2/sites-available/wordpress.conf</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#agregamos-lo-siguiente","title":"Agregamos lo siguiente","text":"<pre><code>&lt;VirtualHost *:80&gt;\n    DocumentRoot /srv/www/wordpress\n    &lt;Directory /srv/www/wordpress&gt;\n        Options FollowSymLinks\n        AllowOverride Limit Options FileInfo\n        DirectoryIndex index.php\n        Require all granted\n    &lt;/Directory&gt;\n    &lt;Directory /srv/www/wordpress/wp-content&gt;\n        Options FollowSymLinks\n        Require all granted\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#luego-habilitamos-el-nuevo-sitio-de-wordpress-y-el-modulo-de-reescritura-de-apache","title":"Luego habilitamos el nuevo sitio de WordPress y el m\u00f3dulo de reescritura de Apache","text":"<p><code>sudo a2ensite wordpress.conf</code> <code>sudo a2enmod rewrite</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#deshabilitamos-el-sitio-predeterminado-it-works-con","title":"Deshabilitamos el sitio predeterminado \u201cIt Works\u201d con","text":"<p><code>sudo a2dissite 000-default</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#reiniciamos-apache-para-aplicar-los-cambios","title":"Reiniciamos Apache para aplicar los cambios","text":"<p><code>sudo systemctl restart apache2</code></p>"},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#paso-3-finalizamos-la-instalacion-de-wordpress","title":"Paso 3: Finalizamos la instalaci\u00f3n de WordPress","text":""},{"location":"Pr%C3%A1ctica%202.4/Documento-detallado/#abrimos-el-navegador-nos-dirigimos-a-la-direccion-ip-del-servidor-1-en-un-navegador-httpip_del_servidor_1","title":"Abrimos el navegador: Nos dirigimos a la direcci\u00f3n IP del \"Servidor 1\" en un navegador (<code>http://IP_DEL_SERVIDOR_1</code>)","text":"<p>  De esta forma con un script:</p> <ol> <li>Automatizamos la instalaci\u00f3n de Apache, PHP y WordPress.</li> <li>Configuramos una arquitectura distribuida con la base de datos en un servidor separado, mejorando rendimiento y seguridad.</li> <li>Optimizamos los recursos al permitir un mejor uso de la CPU y memoria en cada servidor.</li> </ol> <p>** Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p>"},{"location":"Pr%C3%A1ctica%202.4/Mysql-para-wordpress/","title":"Mysql para wordpress","text":"<pre><code>#!/bin/bash\n\n#Script para configurar una BBDD de mysql para Wordpress en un servidor aparte (nivel 2)\n\n#Instalaci\u00f3n de dialog\nsudo apt install dialog -y\n\n#Funci\u00f3n para capturar el c\u00f3digo de retorno del di\u00e1logo\nfunction acabar() {\n  exit_status=$?\n  # Verificar si se seleccion\u00f3 \"Cancelar\"\n  if [ $exit_status -ne 0 ]; then\n    clear\n    echo \"Operaci\u00f3n cancelada\"\n    exit 1\n  fi\n}\n\n#Actualizamos el sistema\ndialog --title \"Actualizaci\u00f3n del sistema update-upgrade\" \\\n  --yesno \"\u00bfActualizamos?\" 0 0\nsino=$?\nif [ $sino -eq 0 ]; then\n  clear\n  sudo apt update -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y\nfi\n\n#Instalaci\u00f3n MySQL\nsudo apt install mysql-server -y\n\nclear\n\n#Cambiamos la contrase\u00f1a del usuario root de mysql-server\npasswdmysqlroot=$(dialog --title \"Contrase\u00f1a inicial para root en mysql\" \\\n  --stdout \\\n  --inputbox \"Password (8 carac.mayus-minus-n\u00fam-signo)\" 0 50)\n#Llamo a la funcion:\nacabar\n\nsqlcomandos=\"alter user 'root'@'localhost' identified with caching_sha2_password by '$passwdmysqlroot';\nflush privileges;\"\n\n#Ejecutamos los comandos SQL en mysql\nsudo mysql -u root -e \"$sqlcomandos\"\n\n#Creamos una BBDD para Wordpress y un nuevo usuario con contrase\u00f1a en mysql-server tambien para Wordpress\nnombase=$(dialog --title \"Creamos BBDD para Wordpress\" \\\n  --stdout \\\n  --inputbox \"Nombre\" 0 0)\n#Llamo a la funcion:\nacabar\n\nnomuser=$(dialog --title \"Creamos el usuario\" \\\n  --stdout \\\n  --inputbox \"Nombre\" 0 0)\n#Llamo a la funcion:\nacabarEdu\n\npassuser=$(dialog --title \"Contrase\u00f1a para el nuevo usuario de Wordpress\" \\\n  --stdout \\\n  --inputbox \"Password (8 carac.mayus-minus-n\u00fam-signo)\" 0 50)\n#Llamo a la funcion:\nacabar\nclear\n\n#Ahora creamos una BBDD y un nuevo usuario para Wordpress\nsqlcomandosphp=\"create database $nombase; \ncreate user '$nomuser'@'%' identified with caching_sha2_password by '$passuser';\nGRANT ALL PRIVILEGES ON *.* TO '$nomuser'@'%';\nflush privileges;\"\n\n#Ejecutamos los comandos SQL en mysql\nsudo mysql -u root -p\"$passwdmysqlroot\" -e \"$sqlcomandosphp\"\n\n#Permitir conexiones remotas habilitando el acceso a Mysql\nsudo sed -i \"31s/.*/bind-address            = 0.0.0.0/\" /etc/mysql/mysql.conf.d/mysqld.cnf\nsudo systemctl restart mysql.service\n\n#abrir el puerto de Mysql (3306) en el firewallwpedu\nsudo ufw enable\nsudo ufw allow 3306\nsudo ufw status\n\nexit 0\n</code></pre>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/","title":"Pr\u00e1ctica 2.5 - Balanceo de Carga con Apache","text":"Pr\u00e1ctica 2.5 Pr\u00e1ctica 2.5 - Balanceo de Carga con Apache"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#actualizar-paquetes-del-sistema","title":"Actualizar Paquetes del Sistema","text":"<p>Primero, actualizaremos y mejoraremos todos los paquetes del sistema a la \u00faltima versi\u00f3n en todos los servidores:</p> <p><code>apt update -y</code></p> <p><code>apt upgrade -y</code></p> <p>Reiniciaremos todos los servidores para aplicar los cambios.</p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#instalaremos-el-servidor-web-apache-en-los-tres-servidores","title":"Instalaremos el Servidor Web Apache en los tres servidores","text":"<p><code>sudo apt install apache2 -y</code></p> <p>Verificamos el estado del servicio Apache:</p> <p><code>systemctl status apache2</code></p> <p></p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#configuramos-el-primer-servidor-backend-apache","title":"Configuramos el Primer Servidor Backend Apache","text":""},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#configuramos-el-firewall","title":"Configuramos el Firewall","text":""},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#establecemos-los-puertos-22-y-80-para-comunicarnos-por-terminal-con-el-servidor-y-para-poder-acceder-al-servidor-apache","title":"Establecemos los puertos 22 y 80 para comunicarnos por terminal con el servidor y para poder acceder al servidor apache","text":"<p><code>sudo ufw enable</code></p> <p><code>sudo ufw allow 22</code></p> <p><code>sudo ufw allow 80</code></p> <p></p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#eliminamos-la-pagina-por-defecto-documentroot-indexhtml-para-evitar-que-no-interfiera-en-cada-servidor-backend-web1-y-web2","title":"Eliminamos la p\u00e1gina por defecto (DocumentRoot) <code>index.html</code> para evitar que no interfiera en cada servidor backend <code>web1</code> y <code>web2</code>","text":"<p><code>cd /var/www/html</code></p> <p><code>sudo rm -rf index.html</code></p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#creamos-una-pagina-html-de-muestra-y-un-archivo-de-configuracion-de-host-virtual-en-el-primer-servidor-apache","title":"Creamos una p\u00e1gina HTML de muestra y un archivo de configuraci\u00f3n de host virtual en el primer servidor Apache","text":"<p><code>sudo nano /var/www/html/web1.html</code></p> <p>Agregamos el siguiente c\u00f3digo HTML:</p> <pre><code>&lt;html&gt;\n    &lt;head&gt;&lt;title&gt;Backend 1&lt;/title&gt;&lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;Este es el servidor Backend 1&lt;/h1&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p></p> <p>Guardamos y cerramos el archivo.</p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#deshabilitamos-el-sitio-por-defecto-de-apache-para-evitar-conflictos","title":"Deshabilitamos el sitio por defecto de Apache para evitar conflictos","text":"<p><code>cd /etc/apache2/sites-available</code></p> <p><code>sudo a2dissite 000-default.conf</code></p> <p><code>sudo systemctl reload apache2.service</code></p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#creamos-el-archivo-de-configuracion-del-host-virtual","title":"Creamos el archivo de configuraci\u00f3n del host virtual","text":"<p><code>nano /etc/apache2/sites-available/web1.conf</code></p> <p>Agregamos las siguientes configuraciones:</p> <pre><code>&lt;VirtualHost *:80&gt;\n    ServerName web1.iaw2425.com\n    ServerAdmin webmaster@localhost\n    DocumentRoot /var/www/html\n    DirectoryIndex web1.html\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\n</code></pre> <p></p> <p>Guardamos y cerramos el archivo, luego habilitamos y recargamos el servicio Apache: Habilitamos:</p> <p><code>sudo a2ensite web1.conf</code></p> <p><code>sudo systemctl reload apache2</code></p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#configuramos-el-segundo-servidor-backend-apache","title":"Configuramos el Segundo Servidor Backend Apache","text":""},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#a-partir-de-la-configuracion-del-firewall-realizaremos-los-dos-mismos-pasos-previos-hechos-anteriormente-hasta-aqui-que-es-donde-cambiaremos-la-configuracion-para-el-segundo-servidor","title":"A partir de la configuraci\u00f3n del Firewall realizaremos los dos mismos pasos previos hechos anteriormente hasta aqu\u00ed, que es donde cambiaremos la configuraci\u00f3n para el segundo servidor","text":""},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#creamos-una-pagina-html-de-muestra-en-el-segundo-servidor","title":"Creamos una p\u00e1gina HTML de muestra en el segundo servidor","text":"<p><code>sudo nano /var/www/html/web2.html</code></p> <p>Agregamos el siguiente c\u00f3digo HTML:</p> <pre><code>&lt;html&gt;\n    &lt;head&gt;&lt;title&gt;Backend 2&lt;/title&gt;&lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;Este es el servidor Backend 2&lt;/h1&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre> <p></p> <p>Deshabilitamos el sitio por defecto de Apache para evitar conflictos</p> <p><code>cd /etc/apache2/sites-available</code></p> <p><code>sudo a2dissite 000-default.conf</code></p> <p><code>sudo systemctl reload apache2.service</code></p> <p>Guardamos y cerramos el archivo.</p> <p>Creamos el archivo de configuraci\u00f3n del host virtual</p> <p><code>nano /etc/apache2/sites-available/web2.conf</code></p> <p>Agregamos las siguientes configuraciones:</p> <pre><code>&lt;VirtualHost *:80&gt;\n    ServerName web2.iaw2425.com\n    ServerAdmin webmaster@localhost\n    DocumentRoot /var/www/html\n    DirectoryIndex web2.html\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\n</code></pre> <p></p> <p>Guardamos y cerramos el archivo, luego habilitamos y recargamos el servicio Apache: Habilitamos:</p> <p><code>sudo a2ensite web2.conf</code></p> <p><code>sudo systemctl reload apache2</code></p> <p>Podemos automatizar la configuraci\u00f3n de backends con un script</p> <p>Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#creamos-el-balanceador-de-carga-de-apache","title":"Creamos el Balanceador de Carga de Apache","text":""},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#una-vez-actualizado-el-sistema-y-configurado-el-firewall-seguiremos-con-los-siguientes-pasos","title":"Una vez actualizado el sistema y configurado el Firewall seguiremos con los siguientes pasos","text":""},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#habilitamos-los-modulos-proxy-en-el-servidor-de-balanceo-de-carga","title":"Habilitamos los m\u00f3dulos proxy en el servidor de balanceo de carga","text":"<pre><code>sudo a2enmod proxy\nsudo a2enmod proxy_http\nsudo a2enmod proxy_balancer\nsudo a2enmod lbmethod_byrequests\n</code></pre> <p>Reiniciamos el servicio Apache:</p> <p><code>sudo systemctl restart apache2</code></p> <p>Verifica todos los m\u00f3dulos proxy:</p> <p><code>sudo apachectl -M | grep proxy</code></p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#creamos-un-archivo-de-configuracion-de-apache-para-el-balanceo-de-carga","title":"Creamos un archivo de configuraci\u00f3n de Apache para el balanceo de carga","text":"<p>Deshabilitamos el sitio por defecto de Apache para evitar conflictos</p> <p><code>cd /etc/apache2/sites-available</code></p> <p><code>sudo a2dissite 000-default.conf</code></p> <p><code>sudo systemctl reload apache2.service</code></p> <p>Creamos un archivo de configuraci\u00f3n de Apache para el balanceo de carga</p> <p><code>sudo nano /etc/apache2/sites-available/loadbalancer.conf</code></p> <p>Agregamos las siguientes configuraciones:</p> <pre><code>&lt;VirtualHost *:80&gt;\n    ServerName balancer.iaw2425.com\n    &lt;Proxy balancer://webserver&gt;\n        # servidor 1\n        BalancerMember http://web1.iaw2425.com\n        #BalancerMember http://IP_HTTP_SERVER_1:80\n\n        #servidor 2\n        BalancerMember http://web2.iaw2425.com\n        #BalancerMember http://IP_HTTP_SERVER_1:80\n\n        ProxySet stickysession=ROUTEID\n    &lt;/Proxy&gt;\n    ProxyPreserveHost On\n    ProxyPass / balancer://webserver/\n    ProxyPassReverse / balancer://webserver/\n&lt;/VirtualHost&gt;\n</code></pre> <p></p> <p>Guardamos y cerramos el archivo, luego habilitamos y recargamos el servicio Apache: Habilitamos:</p> <p><code>sudo a2ensite loadbalancer.conf</code></p> <p><code>sudo systemctl reload apache2</code></p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#configuraremos-la-politica-de-balanceo-de-carga","title":"Configuraremos la Pol\u00edtica de Balanceo de Carga","text":"<p>Para configurar la pol\u00edtica de balanceo de carga es necesario tener activado previamente el m\u00f3dulo proxy_balancer con el siguiente comando:</p> <p><code>sudo a2enmod proxy_balancer</code></p> <p>El balanceo de carga que vamos a utilizar en esta pr\u00e1ctica ser\u00e1 un balanceo de tipo Round Robin. Este m\u00e9todo de balanceo de carga consiste en distribuir las peticiones entre los servidores de forma secuencial, de forma que cada vez que llegue una nueva petici\u00f3n se env\u00eda al siguiente servidor de la lista de servidores configurados en el servidor Apache.</p> <p>Para activar este m\u00e9todo de balanceo tenemos que activar el m\u00f3dulo <code>lbmethod_byrequests:</code></p> <p><code>sudo a2enmod lbmethod_byrequests</code></p> <p>Este m\u00e9todo de balanceo tambi\u00e9n permite distribuir las peticiones entre los servidores en funci\u00f3n de los par\u00e1metros <code>lbfactor y lbstatus</code>.</p> <p>Recordemos que despu\u00e9s de habilitar los m\u00f3dulos es necesario reiniciar el servicio de Apache:</p> <p><code>sudo systemctl restart apache2.service</code></p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#configuracion-en-etchosts","title":"Configuraci\u00f3n en /etc/hosts","text":"<p>En el balanceador, agregaremos las IP y los nombres de todos los servidores backend (<code>web1, web2</code>) en el archivo /etc/hosts:</p> <pre><code>`# IP del servidor web1`\n`&lt;IP_web1&gt; web1.iaw2425.com`\n`#IP del servidor web2`\n`&lt;IP_web2&gt; web2.iaw2425.com`\n</code></pre> <p></p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#pondremos-en-el-navegador-la-ip-del-servidor-balanceador-para-verificar-el-balanceo-de-carga-con-apache","title":"Pondremos en el navegador la IP del servidor balanceador para verificar el Balanceo de carga con Apache","text":"<p>Teniendo en cuenta tambi\u00e9n que tendremos que configurar antes en el fichero /etc/hosts del equipo donde tenemos el navegador la <code>IP del balanceador y nombre de dominio</code> para asegurar que las solicitudes al dominio del balanceador se dirijan correctamente a la IP del balanceador, en lugar de pasar por el DNS p\u00fablico o por alg\u00fan otro servicio de resoluci\u00f3n de nombres.</p> <p> </p>"},{"location":"Pr%C3%A1ctica%202.5/Documento-apache/#tenemos-que-tener-en-cuenta-el-configurar-la-ip-y-el-nombre-del-dominio-en-el-balanceador-en-el-fichero-etchosts-pero-sino-trabajamos-con-nombres-de-dominio-solo-con-ip-nos-valdra","title":"Tenemos que tener en cuenta el configurar la IP y el nombre del dominio en el balanceador en el fichero /etc/hosts , pero sino trabajamos con nombres de dominio solo con IP nos valdr\u00e1","text":"<p>Podemos automatizar la configuraci\u00f3n del balanceador con un script</p> <p>Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p>"},{"location":"Pr%C3%A1ctica%202.5/script-backend/","title":"Script backend","text":"<pre><code>#!/bin/bash\n\n#Script para configurar un backends en un sistema de balanceador de carga\n\n#Instalaci\u00f3n de dialog\nsudo apt install dialog -y\n\n#Funci\u00f3n para capturar el c\u00f3digo de retorno del di\u00e1logo\nfunction acabar() {\n  exit_status=$?\n  # Verificar si se seleccion\u00f3 \"Cancelar\"\n  if [ $exit_status -ne 0 ]; then\n    clear\n    echo \"Operaci\u00f3n cancelada\"\n    exit 1\n  fi\n}\n\n#Actualizamos el sistema\ndialog --title \"Actualizaci\u00f3n del sistema update-upgrade\" \\\n  --yesno \"\u00bfActualizamos?\" 0 0\nsino=$?\nif [ $sino -eq 0 ]; then\n  clear\n  sudo apt update -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y\nfi\n\nclear\n#Instalaci\u00f3n de Apache\nsudo apt install apache2 -y\n\n#configuramos el firewall\nsudo ufw enable\nsudo ufw allow 22\nsudo ufw allow 80\n\n#Eliminamos la pagina por defecto (DocumentRoot) index.html\ncd /var/www/html || exit\nsudo rm -rf index.html\n\n#Introducimos el nombre del fichero .html para la p\u00e1gina de muestra\nnompag=$(dialog --title \"P\u00e1gina HTML de muestra\" \\\n  --stdout \\\n  --inputbox \"Nombre del fichero .html (sin poner .html)\" 0 0)\n#Llamo a la funcion:\nacabar\n\n#Introducimos el nombre del dominio para el backend\nservername=$(dialog --title \"ServerName\" \\\n  --stdout \\\n  --inputbox \"Nombre (ejem.pepe.aeo25.com)\" 0 0)\n#Llamo a la funcion:\nacabar\n\n#Introducimos el n\u00famero que le asignamos al backend 1,2 3..\nnumkbackend=$(dialog --title \"Backend\" \\\n  --stdout \\\n  --inputbox \"N\u00famero que le asignamos\" 0 0)\n#Llamo a la funcion:\nacabar\n\nclear\n\n#Creamos p\u00e1ginas p\u00e1gina HTML de muestra\necho \"&lt;html&gt;\n    &lt;head&gt;&lt;title&gt;Backend $numkbackend&lt;/title&gt;&lt;/head&gt;\n    &lt;body&gt;\n        &lt;h1&gt;Este es el servidor Backend $numkbackend&lt;/h1&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\" | sudo tee /var/www/html/\"$nompag\".html\n\n#Deshabilitamos el sitio por defecto de Apache para evitar conflictos\ncd /etc/apache2/sites-available || exit\nsudo a2dissite 000-default.conf\nsudo systemctl reload apache2.service\n\n#Creamos el archivo de configuraci\u00f3n del host virtual\necho \"&lt;VirtualHost *:80&gt;\n    ServerName $servername\n    ServerAdmin webmaster@localhost\n    DocumentRoot /var/www/html\n    DirectoryIndex $nompag.html\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\" | sudo tee /etc/apache2/sites-available/\"$nompag\".conf\n\n#Habilitamos y recargamos\nsudo a2ensite \"$nompag\".conf | sudo systemctl reload apache2.service\n\nexit 0\n</code></pre>"},{"location":"Pr%C3%A1ctica%202.5/script-balancer/","title":"Script balancer","text":"<pre><code>#!/bin/bash\n\n#Script para configurar  y crear el balanceador de carga\n\n#Instalaci\u00f3n de dialog\nsudo apt install dialog -y\n\n#Funci\u00f3n para capturar el c\u00f3digo de retorno del di\u00e1logo\nfunction acabar() {\n  exit_status=$?\n  # Verificar si se seleccion\u00f3 \"Cancelar\"\n  if [ $exit_status -ne 0 ]; then\n    clear\n    echo \"Operaci\u00f3n cancelada\"\n    exit 1\n  fi\n}\n\n#Actualizamos el sistema\ndialog --title \"Actualizaci\u00f3n del sistema update-upgrade\" \\\n  --yesno \"\u00bfActualizamos?\" 0 0\nsino=$?\nif [ $sino -eq 0 ]; then\n  clear\n  sudo apt update -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y\nfi\n\nclear\n#Instalaci\u00f3n de Apache\nsudo apt install apache2 -y\n\n#configuramos el firewall\nsudo ufw enable\nsudo ufw allow 22\nsudo ufw allow 80\n\n#Habilitamos los m\u00f3dulos proxy en el servidor de balanceo de carga, reiniciamos el servicio, verificamos todos los m\u00f3dulos proxy\nsudo a2enmod proxy\nsudo a2enmod proxy_http\nsudo a2enmod proxy_balancer\nsudo a2enmod lbmethod_byrequests\nsudo systemctl restart apache2.service\nsudo apachectl -M | grep proxy\n\n# Se crea un archivo de configuraci\u00f3n de Apache para el balanceo de carga\n#Deshabilitamos el sitio por defecto de Apache para evitar conflictos\ncd /etc/apache2/sites-available || exit\nsudo a2dissite 000-default.conf\nsudo systemctl reload apache2.service\n\n#Creamos un archivo de configuraci\u00f3n de Apache para el balanceo de carga\nnomconf=$(dialog --title \"Fichero de configuraci\u00f3n de Apache\" \\\n  --stdout \\\n  --inputbox \"Nombre (sin .conf)\" 0 0)\n#Llamo a la funcion:\nacabar\n\n#Introducimos el nombre del dominio para el balanceador\nservername=$(dialog --title \"ServerName\" \\\n  --stdout \\\n  --inputbox \"Nombre (ejem.pepe.aeo25.com)\" 0 40)\n#Llamo a la funcion:\nacabar\n\n#agregamos las configuraciones\necho \"&lt;VirtualHost *:80&gt;\n    ServerName $servername\n    &lt;Proxy balancer://webserver&gt;\" | sudo tee /etc/apache2/sites-available/\"$nomconf\".conf\n\n#introducimos el n\u00famero de servidores backend que vamos a utilizar\ncontrol=0\nwhile [ \"$control\" -ne 10 ]; do\n  numkbackend=$(dialog --title \"Backend-cantidad\" \\\n    --stdout \\\n    --inputbox \"Cuantos vamos a utilizar\" 0 40)\n  #Llamo a la funcion:\n  acabar\n\n  #Comprobamos el m\u00ednimo\n  if [ \"$numkbackend\" -lt 1 ]; then\n    for i in $(seq 0 20 100); do\n      sleep 1\n      echo \"$i\" | dialog --gauge \"Cantidad de backend err\u00f3nea, volvemos a intentarlo\" 0 0 0\n    done\n  else\n    control=10\n  fi\ndone\nfor ((i = 1; i &lt;= \"$numkbackend\"; i++)); do\n\n  #Introducimos el nombre del dominio para el backend X\n  servername=$(dialog --title \"ServerName para el backend $i \" \\\n    --stdout \\\n    --inputbox \"Nombre (ejem.pepe.aeo25.com)\" 0 40)\n  #Llamo a la funcion:\n  acabar\n\n  echo \"        # servidor $i\n        BalancerMember http://$servername\n        #BalancerMember http://IP_HTTP_SERVER_1:80\n\n        \" | sudo tee -a /etc/apache2/sites-available/\"$nomconf\".conf\n\n  #Introducimos la IP del backend\n  ipbackend=$(dialog --title \"Direcci\u00f3n backend $i \" \\\n    --stdout \\\n    --inputbox \"IP\" 0 0)\n  #Llamo a la funcion:\n  acabar\n\n  #En el balanceador, agregaremos las IP y los nombres de todos los servidores backend en el archivo /etc/hosts\n  sudo sed -i \"3i $ipbackend       $servername\" /etc/hosts\n\ndone\n\necho \"        ProxySet stickysession=ROUTEID\n    &lt;/Proxy&gt;\n    ProxyPreserveHost On\n    ProxyPass / balancer://webserver/\n    ProxyPassReverse / balancer://webserver/\n&lt;/VirtualHost&gt;\" | sudo tee -a /etc/apache2/sites-available/\"$nomconf\".conf\n\n#Habilitamos y recargamos\nsudo a2ensite \"$nomconf\".conf\nsudo systemctl reload apache2.service\n\n#Activamos el m\u00f3dulo proxy_balancer\nsudo a2enmod proxy_balancer\n\n#Para activar este m\u00e9todo de balanceo tenemos que activar el m\u00f3dulo lbmethod_byrequests\nsudo a2enmod lbmethod_byrequests\n\n#Reiniciamos el servicio\nsudo systemctl restart apache2.service\n\n#Pondremos en el navegador la IP del servidor balanceador para verificar el Balanceo de carga con Apache\ndialog --title \"Pondremos en el navegador la IP del servidor balanceador\" \\\n  --backtitle \"Previamente configuraremos en el fichero /etc/hosts del navegador la IP y nombre de dominio del servidor balanceador\" \\\n  --msgbox \"Para verificar el Balanceo de carga con Apache\" 0 0\n\nclear\nexit 0\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.1/FormularioB/","title":"FormularioB","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"es\"&gt;\n\n&lt;head&gt;\n  &lt;meta charset=\"UTF-8\"&gt;\n  &lt;title&gt;Enviar un fichero por formulario&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n  &lt;h2&gt;Enviar un fichero de texto o imagen&lt;/h2&gt;\n  &lt;form action=\"\" method=\"post\" enctype=\"multipart/form-data\"&gt;\n    Seleccione un archivo de (texto o imagen):\n    &lt;input type=\"file\" name=\"fileToUpload\" accept=\".txt,image/*\" required&gt;\n    &lt;br&gt;&lt;br&gt;\n    &lt;input type=\"submit\" value=\"Subir archivo\"&gt;\n  &lt;/form&gt;\n\n  &lt;?php\n  if ($_SERVER[\"REQUEST_METHOD\"] == \"POST\") {\n    $directorioDestino = \"subidas/\"; // Directorio donde se guardar\u00e1n los archivos subidos\n    $ficheroDestino = $directorioDestino . basename($_FILES[\"archivoAsubir\"][\"name\"]);\n    $uploadOk = 1; // Variable para controlar si la subida es correcta\n    $tipoFichero = strtolower(pathinfo($ficheroDestino, PATHINFO_EXTENSION));\n    $nombre = htmlspecialchars(basename($_FILES[\"fileToUpload\"][\"name\"]));\n\n    // Comprobar si el archivo es de tipo permitido\n    if (!in_array($tipoFichero, [\"txt\", \"jpg\", \"jpeg\", \"png\", \"gif\"])) {\n      echo \"&lt;p style='color: red;'&gt;Solo se permiten archivos de texto (.txt) o de imagen (.jpg, .jpeg, .png, .gif.&lt;/p&gt;\";\n      $uploadOk = 0;\n    }\n\n    // Comprobar si $uploadOk est\u00e1 a 0 por un error\n    if ($uploadOk == 0) {\n      echo \"&lt;p style='color: red;'&gt;Lo sentimos, su archivo no fue subido.&lt;/p&gt;\";\n\n      // Si todo est\u00e1 bien, intentar subir el archivo\n    } else {\n      if (move_uploaded_file($_FILES[\"archivoAsubir\"][\"tmp_name\"], $ficheroDestino)) {\n        echo \"&lt;p style='color: green;'&gt;El archivo \" . $nombre . \" ha sido subido.&lt;/p&gt;\";\n\n        // Mostrar el contenido del archivo\n        if ($tipoFichero == \"txt\") {\n          echo \"&lt;h3&gt;Contenido del archivo de texto:&lt;/h3&gt;\";\n          echo \"&lt;pre&gt;\";\n          echo htmlspecialchars(file_get_contents($ficheroDestino));\n          echo \"&lt;/pre&gt;\";\n        } else {\n          echo \"&lt;h3&gt;Vista previa de la imagen:&lt;/h3&gt;\";\n          echo \"&lt;img src='$ficheroDestino' alt='Imagen subida' style='max-width: 300px; max-height: 300px;'&gt;\";\n        }\n      } else {\n        echo \"&lt;p style='color: red;'&gt;Lo sentimos, hubo un error al subir su archivo.&lt;/p&gt;\";\n      }\n    }\n  }\n  ?&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.1/formularios/","title":"Documentaci\u00f3n Formularios","text":"<p>Verificamos que tenemos instalado para la prueba Apache2 y php.</p> <p><code>apache2 -v</code></p> <p><code>php -v</code></p> <p></p> <p>Si no lo instalamos  y habilitamos con:</p> <p><code>sudo apt update</code></p> <p><code>sudo apt install php libapache2-mod-php</code></p> <p><code>sudo a2enmod php</code></p> <p><code>sudo systemctl restart apache2</code></p> <p>Creamos un fichero .conf para nuestro sitio de pruebas.</p> <p><code>sudo nano /etc/apache2/sites-available/formularios.conf</code></p> <p></p> <p>Habilitamos y recargamos.</p> <p><code>sudo a2ensite formularios.conf</code></p> <p><code>sudo systemctl reload apache2.service</code></p> <p>Copiamos el archivo .php (que contiene la parte .html y la parte .php) en /var/www/html.</p> <p>** Puedes ver el fichero.php aqu\u00ed</p> <p>Descargar el archivo</p> <p><code>sudo cp formularioB.php /var/www/html</code></p> <p>Le damos permisos:</p> <p><code>sudo chown -R www-data:www-data formularioB.php</code></p> <p><code>sudo chmod -R 644 formularioB.php</code></p> <p>Creamos en \"/var/www/html\" un directorio \"subidas\" para que contenga los ficheros que vamos a subir.</p> <p>El nombre del directorio corresponde con el que tenemos configurado en el fichero.php</p> <p><code>sudo mkdir /var/www/html/subidas</code></p> <p>Le damos permisos:</p> <p><code>sudo chown -R www-data:www-data subidas</code></p> <p><code>sudo chmod -R 755 subidas</code></p> <p></p> <p>Comprobamos.</p> <p> </p>"},{"location":"Pr%C3%A1ctica%203.1/formularios/#documentacion-tecnica-formulario-de-subida-de-archivos","title":"Documentaci\u00f3n T\u00e9cnica: Formulario de Subida de Archivos","text":""},{"location":"Pr%C3%A1ctica%203.1/formularios/#1-descripcion-del-formulario","title":"1. Descripci\u00f3n del Formulario","text":"<p>Este formulario permite a los usuarios cargar un archivo de texto o una imagen desde su dispositivo al servidor. Posteriormente, el archivo se guarda en un directorio espec\u00edfico, y su contenido se muestra en la p\u00e1gina seg\u00fan el tipo de archivo.</p>"},{"location":"Pr%C3%A1ctica%203.1/formularios/#2-campos-que-se-pueden-ingresar","title":"2. Campos que se Pueden Ingresar","text":"<ul> <li>Campo de Archivo:</li> <li>Etiqueta: <code>input type=\"file\"</code>.</li> <li>Atributo <code>name</code>: <code>fileToUpload</code>.</li> <li>Atributo <code>accept</code>: <code>.txt, image/*</code> (solo archivos de texto-imagen JPG, PNG, GIF, etc.).</li> <li>Es un campo obligatorio (<code>required</code>).</li> </ul>"},{"location":"Pr%C3%A1ctica%203.1/formularios/#3-validaciones-que-se-realizan","title":"3. Validaciones que se realizan","text":""},{"location":"Pr%C3%A1ctica%203.1/formularios/#en-el-cliente-html","title":"En el Cliente (HTML)","text":"<ul> <li>Solo se permiten archivos de texto (<code>.txt</code>) o im\u00e1genes (<code>image/*</code>).</li> <li>El campo es obligatorio (<code>required</code>).</li> </ul>"},{"location":"Pr%C3%A1ctica%203.1/formularios/#en-el-servidor-php","title":"En el Servidor (PHP)","text":"<ol> <li>Tipo de Archivo:</li> <li>Se valida que el tipo de archivo est\u00e9 en la lista permitida (<code>txt</code>, <code>jpg</code>, <code>jpeg</code>, <code>png</code>, <code>gif</code>).</li> <li>Si no cumple, se muestra un mensaje de error y no se sube el archivo.</li> <li>Integridad de la Subida:</li> <li>Se verifica si hubo errores al subir el archivo (<code>$_FILES[\"archivoAsubir\"][\"error\"]</code>).</li> <li>Seguridad:</li> <li>Se utiliza <code>basename()</code> y <code>htmlspecialchars()</code> para prevenir ataques de tipo Path Traversal o Cross-Site Scripting (XSS).</li> </ol>"},{"location":"Pr%C3%A1ctica%203.1/formularios/#4-como-se-envian-los-datos","title":"4. C\u00f3mo se Env\u00edan los Datos","text":"<ul> <li>M\u00e9todo de Env\u00edo: <code>POST</code>.</li> <li>Encabezado: <code>enctype=\"multipart/form-data\"</code> para permitir la transferencia de datos binarios (archivos).</li> </ul>"},{"location":"Pr%C3%A1ctica%203.1/formularios/#5-como-se-procesan-los-datos","title":"5. C\u00f3mo se Procesan los Datos","text":"<ol> <li>Recepci\u00f3n:</li> <li>El archivo subido se recibe en la variable global <code>$_FILES[\"archivoAsubir\"]</code>.</li> <li>Definici\u00f3n de Rutas:</li> <li>Se define un directorio de destino (<code>subidas/</code>) para almacenar los archivos subidos.</li> <li>La ruta completa se forma concatenando el directorio de destino y el nombre del archivo (<code>basename()</code>).</li> <li>Validaci\u00f3n del Tipo:</li> <li>El tipo de archivo se extrae usando <code>pathinfo()</code> y se compara con una lista permitida.</li> <li>Subida del Archivo:</li> <li>Si todas las validaciones son exitosas, el archivo se mueve al directorio especificado utilizando <code>move_uploaded_file()</code>.</li> </ol>"},{"location":"Pr%C3%A1ctica%203.1/formularios/#6-como-se-muestra-la-informacion-en-la-pagina","title":"6. C\u00f3mo se Muestra la Informaci\u00f3n en la P\u00e1gina","text":"<ol> <li>Mensajes de Estado:</li> <li>Mensaje de \u00e9xito en verde si el archivo se subi\u00f3 correctamente.</li> <li>Mensaje de error en rojo si no se subi\u00f3 debido a restricciones de tipo o problemas durante el proceso.</li> <li>Contenido del Archivo:</li> <li>Si es un archivo de texto (<code>.txt</code>), se lee su contenido con <code>file_get_contents()</code> y se muestra dentro de una etiqueta <code>&lt;pre&gt;</code> para conservar el formato.</li> <li>Si es una imagen, se genera una etiqueta <code>&lt;img&gt;</code> con la ruta del archivo subido como atributo <code>src</code>.</li> </ol>"},{"location":"Pr%C3%A1ctica%203.1/formularios/#7-como-se-guarda-el-archivo","title":"7. C\u00f3mo se Guarda el Archivo","text":"<ul> <li>El archivo subido se guarda en el directorio <code>subidas/</code>.</li> <li>Si el directorio no existe, es necesario crearlo antes de realizar la subida.</li> </ul>"},{"location":"Pr%C3%A1ctica%203.1/formularios/#8-como-se-muestra-el-contenido-del-archivo","title":"8. C\u00f3mo se Muestra el Contenido del Archivo","text":"<ol> <li>Archivos de Texto:</li> <li>Se lee el contenido del archivo usando <code>file_get_contents()</code>.</li> <li>El contenido se escapa con <code>htmlspecialchars()</code> para evitar inyecciones de c\u00f3digo.</li> <li>Im\u00e1genes:</li> <li>Se muestra una vista previa del archivo mediante una etiqueta <code>&lt;img&gt;</code> con atributos <code>max-width</code> y <code>max-height</code> para limitar el tama\u00f1o.</li> </ol>"},{"location":"Pr%C3%A1ctica%203.1/formularios/#9-otra-informacion-relevante","title":"9. Otra Informaci\u00f3n Relevante","text":"<ul> <li>Seguridad:</li> <li>La ruta del archivo se asegura con <code>basename()</code> para evitar rutas no deseadas.</li> <li><code>htmlspecialchars()</code> se utiliza para evitar que el nombre del archivo contenga caracteres que puedan romper el HTML.</li> <li>Restricciones:</li> <li>Actualmente, no se validan los tama\u00f1os de archivo ni se manejan conflictos por nombres de archivos existentes. Es recomendable implementar estas verificaciones si se necesita una soluci\u00f3n m\u00e1s robusta.</li> </ul>"},{"location":"Pr%C3%A1ctica%203.3/buscar_html/","title":"Buscar html","text":"<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;B\u00fasqueda&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;h1&gt;Busqueda de Estudiante&lt;/h1&gt;\n    &lt;form method=\"POST\" action=\"buscar.php\"&gt;\n      Ingrese el identificador del estudiante a buscar:\n      &lt;input type=\"=text\" name=\"id\" /&gt;\n      &lt;br /&gt;&lt;br /&gt;\n      &lt;input type=\"submit\" value=\"Mostrar Alumno\" /&gt;\n    &lt;/form&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.3/buscar_php/","title":"Buscar php","text":"<pre><code>  &lt;?php\n  // Configuraci\u00f3n de conexi\u00f3n\n  $servidor = \"localhost:3306\";\n  $usuario = \"alumne\";\n  $password = \"alumne\";\n  $nomBBDD = \"instituto\";\n  $nomtabla = \"estudiantes\";\n\n  // Conexion a la base de datos\n  $conexion = new mysqli($servidor, $usuario, $password, $nomBBDD) or\n    die(\"Problemas con la conexi\u00f3n\");\n\n  // Recuperar datos desde MySQL \n  $consulta = \"SELECT id,nombre,edad FROM $nomtabla WHERE id='$_REQUEST[id]'\";\n  $registros = mysqli_query($conexion, $consulta);\n\n  //Mostrar resultados\n  while ($reg = mysqli_fetch_array($registros)) {\n    echo \"DATOS OBTENIDOS:&lt;br&gt;&lt;br&gt;\";\n    echo \"Identificador: \" . $reg['id'] . \"&lt;br&gt;\";\n    echo \"Nombre: \" . $reg['nombre'] . \"&lt;br&gt;\";\n    echo \"Edad: \" . $reg['edad'] . \"&lt;br&gt;\";\n  }\n  // Cerrar la conexion\n  mysqli_close($conexion);\n  ?&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.3/crearBBDD/","title":"crearBBDD","text":"<pre><code>&lt;?php\n// Configuraci\u00f3n de conexi\u00f3n\n$servidor = \"localhost:3306\";\n$usuario = \"alumne\";\n$password = \"alumne\";\n$nomBBDD = \"instituto\";\n$nomtabla = \"estudiantes\";\n\n// Crear conexi\u00f3n\n$conexion = new mysqli($servidor, $usuario, $password) or\n  die(\"Problemas con la conexi\u00f3n\");\n\n// Comprobar si la base de datos existe\n$controlBBDD = \"SHOW DATABASES LIKE '$nomBBDD'\";\n$resultadoBBDD = $conexion-&gt;query($controlBBDD);\n\nif ($resultadoBBDD-&gt;num_rows &gt; 0) {\n  echo \"La BBDD $nomBBDD ya existe. No se realizar\u00e1 ninguna acci\u00f3n.&lt;br&gt;&lt;br&gt;\";\n} else {\n\n  // Crear base de datos\n  $creaBBDD = \"CREATE DATABASE `$nomBBDD`\";\n  if ($conexion-&gt;query($creaBBDD) === TRUE) {\n    echo \"Creada BBDD $nomBBDD.&lt;br&gt;&lt;br&gt;\";\n  } else {\n    echo \"Error al crear la BBDD $nomBBDD.&lt;br&gt;&lt;br&gt;\";\n  }\n}\n// Seleccionar base de datos\n$conexion-&gt;select_db($nomBBDD);\n\n// Comprobar si la tabla existe\n$controltabla = \"SHOW TABLES LIKE '$nomtabla'\";\n$resultadoTabla = $conexion-&gt;query($controltabla);\n\nif ($resultadoTabla-&gt;num_rows &gt; 0) {\n  echo \"La tabla '$nomtabla' ya existe. No se realizar\u00e1 ninguna acci\u00f3n.&lt;br&gt;\";\n} else {\n\n  // Crear tabla\n  $creatabla = \"CREATE TABLE `$nomtabla` (\n    id INT AUTO_INCREMENT PRIMARY KEY,\n    nombre VARCHAR(100) NOT NULL,\n    edad INT NOT NULL\n)\";\n\n  if ($conexion-&gt;query($creatabla) === TRUE) {\n    echo \"Tabla '$nomtabla' creada correctamente\";\n  } else {\n    echo \"Error al crear la tabla: $nomtabla\";\n  }\n}\n\n// Cerrar conexi\u00f3n\n$conexion-&gt;close();\n?&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.3/eliminar/","title":"Eliminar","text":"<pre><code>  &lt;?php\n  // Configuraci\u00f3n de conexi\u00f3n\n  $servidor = \"localhost:3306\";\n  $usuario = \"alumne\";\n  $password = \"alumne\";\n  $nomBBDD = \"instituto\";\n  $nomtabla = \"estudiantes\";\n\n  // Conexion a la base de datos\n  $conexion = new mysqli($servidor, $usuario, $password, $nomBBDD) or\n    die(\"Problemas con la conexi\u00f3n\");\n\n  // Recuperar datos desde MySQL \n  $consulta = \"SELECT id,nombre,edad FROM $nomtabla WHERE id='$_REQUEST[id]'\";\n  $registros = mysqli_query($conexion, $consulta);\n\n  //Mostrar los resultados\n  if ($reg = mysqli_fetch_array($registros)) {\n    mysqli_query($conexion, \"delete from $nomtabla where id='$_REQUEST[id]'\") or\n      die(\"Problemas en el select:\" . mysqli_error($conexion));\n    echo \"Se efectu\u00f3 el borrado del estudiante con identificador '$_REQUEST[id]'\";\n  } else {\n    echo \"No existe un estudiante con ese identificador.\";\n  }\n  mysqli_close($conexion);\n  ?&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/","title":"Pr\u00e1ctica 3.3 - Actividad Pr\u00e1ctica de MySQL con Formularios en PHP","text":""},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#1-fichero-para-el-menu-en-html","title":"1.-Fichero para el men\u00fa en .html","text":"<p>Podemos ver el fichero.html aqu\u00ed</p> <p>Descargar el archivo</p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#2-script-para-la-creacion-la-bbdd-y-tabla","title":"2.-Script para la creaci\u00f3n la BBDD y tabla","text":"<p>Crearemos la BBDD y la tabla.</p> <p>Podemos ver el fichero.php aqu\u00ed</p> <p>Descargar el archivo</p> <p></p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#3-formulario-para-insertar-registros","title":"3.-Formulario para insertar registros","text":"<p>Creamos un formulario para que el usuario pueda agregar estudiantes.</p> <p>Podemos ver el fichero.html aqu\u00ed</p> <p>Descargar el archivo</p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#4-script-para-manejar-la-insercion","title":"4.-Script para manejar la inserci\u00f3n","text":"<p>Este script recibe los datos del formulario y los inserta en la tabla.</p> <p>Podemos ver el fichero.php aqu\u00ed</p> <p>Descargar el archivo</p> <p></p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#5-formulario-para-buscar-registros","title":"5.-Formulario para buscar registros","text":"<p>Creamos un formulario para buscar registros por c\u00f3digo.</p> <p>Podemos ver el fichero.html aqu\u00ed</p> <p>Descargar el archivo</p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#6-script-para-manejar-la-busqueda","title":"6.-Script para manejar la b\u00fasqueda","text":"<p>Este script busca registros seg\u00fan el c\u00f3digo ingresado.</p> <p>Podemos ver el fichero.php aqu\u00ed</p> <p>Descargar el archivo</p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#7-formulario-para-listar-registros-y-eliminarlos-o-modificarlos","title":"7.-Formulario para listar registros y eliminarlos o modificarlos","text":"<p>Creamos un formulario que redirige a un script para mostrar los registros y seleccionar si eliminarlo (delete) o modificarlo (update).</p> <p>Podemos ver el fichero.html aqu\u00ed</p> <p>Descargar el archivo</p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#8-script-para-manejar-el-listado","title":"8.-Script para manejar el listado","text":"<p>Este script recupera todos los registros de la tabla.</p> <p>Podemos ver el fichero.php aqu\u00ed</p> <p>Descargar el archivo</p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#9-script-para-manejar-la-eliminacion","title":"9.-Script para manejar la eliminaci\u00f3n","text":"<p>Este script elimina un registro de la tabla por ID.</p> <p>Podemos ver el fichero.php aqu\u00ed</p> <p>Descargar el archivo</p> <p></p> <p></p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#10-script-formulario-para-manejar-la-modificacion","title":"10.-Script-formulario para manejar la modificaci\u00f3n","text":"<p>Este script lista un registro de la tabla por ID con sus datos para poder modificarlos.</p> <p>Podemos ver el fichero.php formulario aqu\u00ed</p> <p>Descargar el archivo</p> <p></p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/formularios_PHP/#11-script-para-manejar-la-actualizacion-update","title":"11.-Script para manejar la actualizaci\u00f3n (update)","text":"<p>Podemos ver el fichero.php aqu\u00ed</p> <p>Descargar el archivo</p> <p>Este script actualiza los datos del estudiante y guarda estos.</p> <p></p> <p></p> <p></p>"},{"location":"Pr%C3%A1ctica%203.3/guardarcambios/","title":"Guardarcambios","text":"<pre><code>&lt;?php\n// Configuraci\u00f3n de conexi\u00f3n\n$servidor = \"localhost:3306\";\n$usuario = \"alumne\";\n$password = \"alumne\";\n$nomBBDD = \"instituto\";\n$nomtabla = \"estudiantes\";\n\n// Conectar a la base de datos\n$conexion = new mysqli($servidor, $usuario, $password, $nomBBDD) or\n  die(\"Problemas con la conexi\u00f3n\");\n\n// Recuperar los datos enviados desde el formulario\n$id = $_REQUEST['id'];\n$nombre = $_REQUEST['nombre'];\n$edad = $_REQUEST['edad'];\n\n// Consulta para actualizar el registro\n$consulta = \"UPDATE $nomtabla SET nombre = '$nombre', edad = '$edad' WHERE id = $id\";\n\nif (mysqli_query($conexion, $consulta)) {\n  echo \"Registro actualizado con \u00e9xito.\";\n} else {\n  echo \"Error al actualizar el registro: \" . mysqli_error($conexion);\n}\n\n// Cerrar la conexi\u00f3n\nmysqli_close($conexion);\n?&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.3/insertar_html/","title":"Insertar html","text":"<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Insert datos&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;h1&gt;Alta de Estudiante&lt;/h1&gt;\n    &lt;form action=\"insertar.php\" method=\"post\"&gt;\n      Ingrese nombre:\n      &lt;input type=\"text\" name=\"nombre\" /&gt;&lt;br /&gt;\n      &lt;br /&gt;\n      Ingrese edad:\n      &lt;input type=\"text\" name=\"edad\" /&gt;&lt;br /&gt;\n      &lt;br /&gt;\n      &lt;br /&gt;&lt;br /&gt;\n      &lt;input type=\"submit\" value=\"Registrar\" /&gt;\n    &lt;/form&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.3/insertar_php/","title":"Insertar php","text":"<pre><code>  &lt;?php\n  // Configuraci\u00f3n de conexi\u00f3n\n  $servidor = \"localhost:3306\";\n  $usuario = \"alumne\";\n  $password = \"alumne\";\n  $nomBBDD = \"instituto\";\n  $nomtabla = \"estudiantes\";\n\n  // Conexion a la base de datos\n  $conexion = new mysqli($servidor, $usuario, $password, $nomBBDD) or\n    die(\"Problemas con la conexi\u00f3n\");\n\n  mysqli_query($conexion, \"insert into $nomtabla(nombre,edad) values \n                        ('$_REQUEST[nombre]','$_REQUEST[edad]')\")\n    or die(\"Problemas en el select\" . mysqli_error($conexion));\n\n  mysqli_close($conexion);\n\n  echo \"El estudiante '$_REQUEST[nombre]' fue dado de alta.\";\n  ?&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.3/listar_html/","title":"Listar html","text":"<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Listado&lt;/title&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;h1&gt;Listado de Estudiantes&lt;/h1&gt;\n    &lt;form method=\"POST\" action=\"listar.php\"&gt;\n      &lt;input type=\"submit\" value=\"Listar Estudiantes\" /&gt;\n    &lt;/form&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.3/listar_php/","title":"Listar php","text":"<pre><code>  &lt;?php\n  // Configuraci\u00f3n de conexi\u00f3n\n  $servidor = \"localhost:3306\";\n  $usuario = \"alumne\";\n  $password = \"alumne\";\n  $nomBBDD = \"instituto\";\n  $nomtabla = \"estudiantes\";\n\n  // Conexion a la base de datos\n  $conexion = new mysqli($servidor, $usuario, $password, $nomBBDD) or\n    die(\"Problemas con la conexi\u00f3n\");\n\n  // Recuperar datos desde MySQL \n  $consulta = \"SELECT id, nombre, edad FROM $nomtabla\";\n  $registros = mysqli_query($conexion, $consulta);\n\n  //Mostrar resultados\n  while ($reg = mysqli_fetch_array($registros)) {\n    echo \"Codigo: \" . $reg['id'] . \"&lt;br&gt;\";\n    echo \"Nombre: \" . $reg['nombre'] . \"&lt;br&gt;\";\n    echo \"Edad: \" . $reg['edad'] . \"&lt;br&gt;&lt;br&gt;\";\n\n    // Bot\u00f3n para eliminar el registro\n    echo \"&lt;form method='post' action='eliminar.php'&gt;\n            &lt;input type='hidden' name='id' value='\" . $reg['id'] . \"' /&gt;\n            &lt;button type='submit' name='eliminar'&gt;Eliminar&lt;/button&gt;\n          &lt;/form&gt;\";\n\n    // Bot\u00f3n para modificar el registro\n    echo \"&lt;form method='post' action='modificar.php'&gt;\n            &lt;input type='hidden' name='id' value='\" . $reg['id'] . \"' /&gt;\n            &lt;button type='submit' name='modificar'&gt;Modificar&lt;/button&gt;\n          &lt;/form&gt;\";\n\n    echo \"&lt;br&gt;\";\n    echo \"&lt;hr&gt;\";\n  }\n\n  // Cerrar la conexion\n  mysqli_close($conexion);\n  ?&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.3/modificar/","title":"Modificar","text":"<pre><code>&lt;?php\n// Configuraci\u00f3n de conexi\u00f3n\n$servidor = \"localhost:3306\";\n$usuario = \"alumne\";\n$password = \"alumne\";\n$nomBBDD = \"instituto\";\n$nomtabla = \"estudiantes\";\n\n// Conexion a la base de datos\n$conexion = new mysqli($servidor, $usuario, $password, $nomBBDD) or\n  die(\"Problemas con la conexi\u00f3n\");\n\n// Recuperar datos desde MySQL \n$consulta = \"SELECT id, nombre, edad FROM $nomtabla WHERE id='$_REQUEST[id]'\";\n$registros = mysqli_query($conexion, $consulta);\n$datos = mysqli_fetch_array($registros);\n\n// Cerrar la conexi\u00f3n\nmysqli_close($conexion);\n?&gt;\n\n\n&lt;html&gt;\n&lt;!-- Mostrar formulario con los datos actuales para actualizar --&gt;\n\n&lt;head&gt;\n  &lt;title&gt;Insert datos&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n  &lt;h1&gt;Modificar Estudiante&lt;/h1&gt;\n  &lt;form action=\"guardarcambios.php\" method=\"post\"&gt;\n    &lt;!--Campo oculto para el id --&gt;\n    &lt;input type=\"hidden\" name=\"id\" value=\"&lt;?php echo $datos['id']; ?&gt;\" /&gt;\n    &lt;br /&gt;\n\n    &lt;!-- Campos con los valores actuales --&gt;\n    Modifique nombre:\n    &lt;input type=\" text\" name=\"nombre\" value=\"&lt;?php echo $datos['nombre']; ?&gt;\" required /&gt;&lt;br /&gt;&lt;br /&gt;\n\n    Modifique edad:\n    &lt;input type=\"text\" name=\"edad\" value=\"&lt;?php echo $datos['edad']; ?&gt;\" min=\"1\" required /&gt;&lt;br /&gt;&lt;br /&gt;\n\n    &lt;!-- Bot\u00f3n para enviar el formulario --&gt;\n    &lt;input type=\"submit\" value=\"Guardar cambios\" /&gt;\n  &lt;/form&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;\n</code></pre>"},{"location":"Pr%C3%A1ctica%203.3/operacionesBBDD/","title":"operacionesBBDD","text":"<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Operaciones con Base de Datos&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;WEB/APP&lt;/h1&gt;\n\n    &lt;form action=\"crearBBDD.php\" method=\"post\"&gt;\n      &lt;input type=\"submit\" value=\"CREAR BBDD\" /&gt;\n    &lt;/form&gt;\n    &lt;br /&gt;\n\n    &lt;form action=\"insertar.html\" method=\"post\"&gt;\n      &lt;input type=\"submit\" value=\"INSERTAR DATOS\" /&gt;\n    &lt;/form&gt;\n    &lt;br /&gt;\n\n    &lt;form action=\"buscar.html\" method=\"post\"&gt;\n      &lt;input type=\"submit\" value=\"BUSCAR DATOS POR CODIGO\" /&gt;\n    &lt;/form&gt;\n    &lt;br /&gt;\n\n    &lt;form action=\"listar.html\" method=\"post\"&gt;\n      &lt;input type=\"submit\" value=\"LISTAR-ELIMINAR-MODIFICAR DATOS\" /&gt;\n    &lt;/form&gt;\n    &lt;br /&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"RExamen_UD2/Documento_examen/","title":"Instalar Wordpress","text":""},{"location":"RExamen_UD2/Documento_examen/#instalamos-wordpress-con-lamp-en-ubuntu-24044","title":"Instalamos WordPress con LAMP en Ubuntu 24.04.4","text":""},{"location":"RExamen_UD2/Documento_examen/#1-actualizamos-los-paquetes-del-sistema","title":"1.-Actualizamos los paquetes del sistema","text":"<p><code>sudo apt update</code> <code>sudo apt dist-upgrade y</code> <code>sudo apt autoremove -y</code></p>"},{"location":"RExamen_UD2/Documento_examen/#2-instalamos-apache","title":"2.-Instalamos apache","text":"<p><code>sudo apt install apache2 -y</code></p>"},{"location":"RExamen_UD2/Documento_examen/#3-instalamos-mysql-server","title":"3.-Instalamos Mysql-server","text":"<p><code>sudo apt install mysql-server -y</code></p>"},{"location":"RExamen_UD2/Documento_examen/#4-instalamos-php-y-las-extensiones-necesarias","title":"4.-Instalamos PHP y las extensiones necesarias","text":"<p><code>sudo apt install php php-mysql php-xml php-curl php-gd php-cli php-zip libapache2-mod-php -y</code></p>"},{"location":"RExamen_UD2/Documento_examen/#configuramos-la-bbbdd-para-wordpress","title":"Configuramos la BBBDD para WordPress","text":""},{"location":"RExamen_UD2/Documento_examen/#1-accedemos-a-mysql","title":"1.-accedemos a Mysql","text":"<p><code>sudo mysql -u root</code></p> <p></p>"},{"location":"RExamen_UD2/Documento_examen/#2-creamos-las-bbdd-permisos-y-el-usuario-para-wordpress","title":"2.-Creamos las BBDD, permisos y el usuario para WordPress","text":"<p><code>CREATE DATABASE nombre-bbdd;</code> <code>CREATE USER 'usuario-wordpress'@'localhost' IDENTIFIED BY 'contrase\u00f1a';</code> <code>GRANT ALL PRIVILEGES ON nombre-bbdd.* TO 'usuario-wordpress'@'localhost';</code> <code>FLUSH PRIVILEGES;</code> <code>EXIT;</code></p> <p></p>"},{"location":"RExamen_UD2/Documento_examen/#sitio-wordpress-1-que-instalamos-con-apt-install","title":"Sitio \"Wordpress 1\" que instalamos con apt install","text":""},{"location":"RExamen_UD2/Documento_examen/#1-descargamos-wordpress","title":"1.-Descargamos Wordpress","text":"<p>Navegamos al directorio de la descarga por defecto de apt (/usr/share)</p> <p><code>cd /usr/share</code> <code>sudo apt install worpress -y</code> <code>sudo chown -R www-data:www-data /usr/share/wordpress</code> <code>sudo chmod -R 755 /usr/share/wordpress</code></p> <p></p>"},{"location":"RExamen_UD2/Documento_examen/#2-configuramos-apache-para-wordpress-1","title":"2.-Configuramos apache para Wordpress 1","text":"<p>Creamos un archivo de configuraci\u00f3n para WordPress en Apache:</p> <p><code>sudo nano /etc/apache2/sites-available/wordpress1.conf</code></p> <p>Agregamos las siguientes l\u00edneas al fichero (por el puerto 8888)</p> <pre><code>&lt;VirtualHost *:8888&gt;\n    ServerAdmin tu_email@example.com\n    DocumentRoot /usr/share/wordpress\n    ServerName tu_dominio_o_IP\n\n    &lt;Directory /usr/share/wordpress&gt;\n        Options Indexes FollowSymLinks\n        AllowOverride All\n        Require all granted\n    &lt;/Directory&gt;\n\n    ErrorLog ${APACHE_LOG_DIR}/wordpress_error.log\n    CustomLog ${APACHE_LOG_DIR}/wordpress_access.log combined\n&lt;/VirtualHost&gt;\n</code></pre> <p></p> <p>Habilitamos la configuraci\u00f3n del sitio y los m\u00f3dulos necesarios</p> <p><code>sudo a2ensite wordpress1.conf</code> <code>sudo systemctl reload apache2.service</code> <code>sudo a2enmod rewrite</code> <code>sudo systemctl restart apache2.service</code></p> <p></p>"},{"location":"RExamen_UD2/Documento_examen/#configuramos-wordpress-1","title":"Configuramos WordPress 1","text":""},{"location":"RExamen_UD2/Documento_examen/#1-configuramos-el-fichero-wp-configphp","title":"1.-Configuramos el fichero wp-config.php","text":"<p>Copiamos el archivo de configuraci\u00f3n de muestra:</p> <p><code>cd /usr/share/wordpress</code> <code>sudo cp wp-config-sample.php wp-config.php</code></p> <p>Editamos el archivo wp-config.php</p> <p><code>sudo nano wp-config.php</code></p> <p></p> <p>Modificamos las siguientes l\u00edneas con los datos de tu base de datos:</p> <pre><code>define('DB_NAME', 'wordpress_db');\ndefine('DB_USER', 'wordpress_user');\ndefine('DB_PASSWORD', 'tu_contrase\u00f1a_segura');\ndefine('DB_HOST', 'localhost');\n</code></pre> <p></p> <p><code>sudo systemctl restart apache2.service</code></p>"},{"location":"RExamen_UD2/Documento_examen/#2-habilitamos-el-puerto-8888","title":"2.- Habilitamos el puerto 8888","text":"<p><code>sudo nano /etc/apache2/ports.conf</code></p> <p></p> <p><code>sudo systemctl restart apache2.service</code></p>"},{"location":"RExamen_UD2/Documento_examen/#3-habilitamos-el-dominio-en-el-fichero-etchosts","title":"3.- Habilitamos el dominio en el fichero /etc/hosts","text":"<p><code>sudo nano /etc/hosts</code></p> <p></p> <p><code>sudo systemctl restart apache2.service</code></p>"},{"location":"RExamen_UD2/Documento_examen/#4-completamos-la-instalacion-a-traves-del-navegador","title":"4.- Completamos la instalaci\u00f3n a trav\u00e9s del navegador","text":"<p>Abre a nuestro navegador web y accedemos a http://tu_dominio_o_IP/wordpress. Seguimos las instrucciones del instalador de WordPress:</p> <p> </p>"},{"location":"RExamen_UD2/Documento_examen/#sitio-wordpress-2-que-instalamos-con-la-ultima-version","title":"Sitio \"Wordpress 2\" que instalamos con la \u00faltima versi\u00f3n","text":""},{"location":"RExamen_UD2/Documento_examen/#1-descargamos-wordpress_1","title":"1.- Descargamos Wordpress","text":"<p>Navegamos al directorio de Apache y descargamos WordPress:</p> <p><code>cd /var/www/html</code> <code>sudo wget https://wordpress.org/latest.tar.gz</code> <code>sudo tar -xzvf latest.tar.gz</code> <code>sudo rm latest.tar.gz</code> <code>sudo chown -R www-data:www-data /var/www/html/wordpress</code> <code>sudo chmod -R 755 /var/www/html/wordpress</code></p> <p></p>"},{"location":"RExamen_UD2/Documento_examen/#2-configuramos-apache-para-wordpress-2","title":"2.- Configuramos apache para Wordpress 2","text":"<p>Creamos un archivo de configuraci\u00f3n para WordPress en Apache:</p> <p><code>sudo nano /etc/apache2/sites-available/wordpress2.conf</code></p> <p>Agregamos las siguientes l\u00edneas al fichero (por el puerto 9999)</p> <pre><code>&lt;VirtualHost *:9999&gt;\n    ServerAdmin tu_email@example.com\n    DocumentRoot /var/www/html/wordpress\n    ServerName tu_dominio_o_IP\n\n    &lt;Directory /var/www/html/wordpress&gt;\n        Options Indexes FollowSymLinks\n        AllowOverride All\n        Require all granted\n    &lt;/Directory&gt;\n\n    ErrorLog ${APACHE_LOG_DIR}/wordpress_error.log\n    CustomLog ${APACHE_LOG_DIR}/wordpress_access.log combined\n&lt;/VirtualHost&gt;\n</code></pre> <p></p> <p>Habilitamos la configuraci\u00f3n del sitio y los m\u00f3dulos necesarios</p> <p><code>sudo a2ensite wordpress2.conf</code> <code>sudo systemctl reload apache2.service</code> <code>sudo a2enmod rewrite</code> <code>sudo systemctl restart apache2.service</code></p> <p></p>"},{"location":"RExamen_UD2/Documento_examen/#configuramos-wordpress-2","title":"Configuramos WordPress 2","text":""},{"location":"RExamen_UD2/Documento_examen/#1-configuramos-el-fichero-wp-configphp_1","title":"1.- Configuramos el fichero wp-config.php","text":"<p>Copiamos el archivo de configuraci\u00f3n de muestra:</p> <p><code>cd /var/www/html/wordpress</code> <code>sudo cp wp-config-sample.php wp-config.php</code></p> <p>Editamos el archivo wp-config.php</p> <p><code>sudo nano wp-config.php</code></p> <p></p> <p>Modificamos las siguientes l\u00edneas con los datos de tu base de datos:</p> <pre><code>define('DB_NAME', 'wordpress_db');\ndefine('DB_USER', 'wordpress_user');\ndefine('DB_PASSWORD', 'tu_contrase\u00f1a_segura');\ndefine('DB_HOST', 'localhost');\n</code></pre> <p></p> <p><code>sudo systemctl restart apache2.service</code></p>"},{"location":"RExamen_UD2/Documento_examen/#2-habilitamos-el-puerto-9999","title":"2.- Habilitamos el puerto 9999","text":"<p><code>sudo nano /etc/apache2/ports.conf</code></p> <p></p> <p><code>sudo systemctl restart apache2.service</code></p>"},{"location":"RExamen_UD2/Documento_examen/#3-habilitamos-el-dominio-en-el-fichero-etchosts_1","title":"3.-Habilitamos el dominio en el fichero /etc/hosts","text":"<p><code>sudo nano /etc/hosts</code></p> <p></p> <p><code>sudo systemctl restart apache2.service</code></p>"},{"location":"RExamen_UD2/Documento_examen/#4-completamos-la-instalacion-a-traves-del-navegador_1","title":"4.-Completamos la instalaci\u00f3n a trav\u00e9s del navegador","text":"<p>Abre a nuestro navegador web y accedemos a http://tu_dominio_o_IP/wordpress. Seguimos las instrucciones del instalador de WordPress:</p> <p> </p>"},{"location":"RExamen_UD2/Documento_examen/#configuramos-el-balanceador-de-carga","title":"Configuramos el balanceador de carga","text":""},{"location":"RExamen_UD2/Documento_examen/#1-instalamos-los-modulos-necesarios","title":"1.-Instalamos los m\u00f3dulos necesarios","text":"<p><code>sudo a2enmod proxy</code> <code>sudo a2enmod ssl</code> <code>sudo a2enmod proxy_balancer</code> <code>sudo a2enmod proxy_http</code> <code>sudo a2enmod lbmethod_byrequests</code> <code>sudo systemctl restart apache2</code></p> <p></p>"},{"location":"RExamen_UD2/Documento_examen/#2-utilizamos-un-certificado-autofirmado","title":"2.-Utilizamos un certificado autofirmado","text":"<p>Ejecutamos el script para este cometido:</p> <p><code>./setup-certificado-firmado.sh</code></p> <p></p>"},{"location":"RExamen_UD2/Documento_examen/#3-configuramos-apache-para-el-balanceador","title":"3.-Configuramos Apache para el balanceador","text":"<p>Creamos un archivo de configuraci\u00f3n para WordPress en Apache:</p> <p><code>sudo nano /etc/apache2/sites-available/wordbalan-ssl.conf</code></p> <p>Agregamos las siguientes l\u00edneas al fichero (por el puerto 443)</p> <pre><code>&lt;VirtualHost *:443&gt;\n    ServerName nombre-de dominio.com\n\n    SSLEngine on\n    SSLCertificateFile /etc/ssl/certs/apache-selfsigned.crt\n    SSLCertificateKeyFile /etc/ssl/private/apache-selfsigned.key\n\n    # Configuraci\u00f3n del balanceador\n    &lt;Proxy \"balancer://mycluster\"&gt;\n        # Usa Round Robin (predeterminado)\n        BalancerMember http://nombre-de-domino.local:puerto\n        BalancerMember http://nombre-de-dominio.local:puerto\n        ProxySet lbmethod=byrequests\n    &lt;/Proxy&gt;\n\n    ProxyPass / balancer://mycluster/\n    ProxyPassReverse / balancer://mycluster/\n\n    ErrorLog ${APACHE_LOG_DIR}/balancer_error.log\n    CustomLog ${APACHE_LOG_DIR}/balancer_access.log combined\n&lt;/VirtualHost&gt;\n</code></pre> <p></p> <p><code>sudo systemctl restart apache2</code> <code>sudo systemctl status apache2</code></p> <p></p>"},{"location":"RExamen_UD2/Documento_examen/#4-habilitamos-en-el-fichero-etchosts","title":"4.-Habilitamos en el fichero /etc/hosts","text":"<p><code>sudo nano /etc/hosts</code></p> <p></p> <p><code>sudo systemctl restart apache2</code></p>"},{"location":"RExamen_UD2/Documento_examen/#5-comprobamos-a-traves-del-navegador-el-funcionamiento-del-balanceador","title":"5.-Comprobamos a trav\u00e9s del navegador el funcionamiento del balanceador","text":"<p>Abre a nuestro navegador web y accedemos a http://tu_dominio_o_IP/wordpress. Seguimos las instrucciones del instalador de WordPress:</p> <p></p> <p></p>"}]}