{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Pr\u00e1ctica 4 Instalar y configurar Wordpress","text":""},{"location":"#descripcion","title":"Descripci\u00f3n","text":"<ul> <li>DOCUMENTO-INFORMACI\u00d3N</li> </ul>"},{"location":"Apache-wordpress-php/","title":"Apache wordpress php","text":"<pre><code>\n\n#!/bin/bash\n\n#Script para instalar y configurar Wordpress con Apache y PHP\n\n#Instalaci\u00f3n de dialog\nsudo apt install dialog -y\n\n#Funci\u00f3n para capturar el c\u00f3digo de retorno del di\u00e1logo\nfunction acabar() {\n  exit_status=$?\n  # Verificar si se seleccion\u00f3 \"Cancelar\"\n\n\n  if [ $exit_status -ne 0 ]; then\n    clear\n    echo \"Operaci\u00f3n cancelada\"\n    exit 1\n  fi\n}\n\n#Actualizamos el sistema\ndialog --title \"Actualizaci\u00f3n del sistema update-upgrade\" \\\n  --yesno \"\u00bfActualizamos?\" 0 0\nsino=$?\nif [ $sino -eq 0 ]; then\n  clear\n  sudo apt update -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y\nfi\n\nclear\n\n#Instalaci\u00f3n de Apache\nsudo apt install apache2 -y\nsudo apt install ghostscript -y\n\n#Instalaci\u00f3n de PHP\necho \"Instalando PHP..\"\nsudo apt install libapache2-mod-php \\\n  php \\\n  php-bcmath \\\n  php-curl \\\n  php-imagick \\\n  php-intl \\\n  php-json \\\n  php-mbstring \\\n  php-mysql \\\n  php-xml \\\n  php-zip -y\n\n#Instalaci\u00f3n Wordpress\ncd /tmp || exit\nwget https://wordpress.org/latest.tar.gz\ntar -xzf latest.tar.gz\nsudo mv wordpress /var/www/html/\n\n#Reinicio del servicio apache y comprobaci\u00f3n del estado\necho \"Reiniciando apache..\"\nsudo systemctl restart apache2.service\nsudo systemctl --no-pager status apache2.service\nsudo ufw enable\nsudo ufw allow in \"Apache Full\"\nsudo ufw allow 22\nsudo ufw allow 3306\nsudo ufw status\n\n#Cambiamos la propiedad y permisos de los archivos\nsudo chown -R www-data:www-data /var/www/html/wordpress\nsudo chmod -R 755 /var/www/html/wordpress\n\n#Configurar WordPress para conectarse a la base de datos\ncd /var/www/html/wordpress || exit\n\n#copiamos el archivo de configuraci\u00f3n\ncp wp-config-sample.php wp-config.php\n\n#Introducimos el nombre del usuario de la BBDD\nnomuser=$(dialog --title \"Usuario de la BBDD\" \\\n  --stdout \\\n  --inputbox \"Nombre\" 0 0)\n#Llamo a la funcion:\nacabar\n\n#Introducimos el password\npasswd=$(dialog --title \"Contrase\u00f1a de acceso a la BBDD\" \\\n  --stdout \\\n  --inputbox \"Password\" 0 0)\n#Llamo a la funcion:\nacabar\n\n#Introducimos la IP del sevidor mysql de la BBDD\nipmysql=$(dialog --title \"Servidor mysql de la BBDD \" \\\n  --stdout \\\n  --inputbox \"IP\" 0 0)\n#Llamo a la funcion:\nacabar\n\n#Establecemos las credenciales de la BBDDE en el archivo de configuraci\u00f3n wp-config.php:\nsudo -u www-data sed -i \"23s/.*/DEFINE( 'DB_NAME', 'wordpress_db' )/\" /var/www/html/wordpress/wp-config.php\nsudo -u www-data sed -i \"26s/.*/DEFINE( 'DB_USER', '$nomuser' )/\" /var/www/html/wordpress/wp-config.php\nsudo -u www-data sed -i \"29s/.*/DEFINE( 'DB_PASSWORD', '$passwd' )/\" /var/www/html/wordpress/wp-config.php\nsudo -u www-data sed -i \"32s/.*/DEFINE( 'DB_HOST', '$ipmysql' )/\" /var/www/html/wordpress/wp-config.php\n\n#creamos un archivo de configuraci\u00f3n para el sitio de Wordpress en Apache\necho \"&lt;VirtualHost *:80&gt;\n        ServerAdmin admin@edu.com\n        DocumentRoot /var/www/html/wordpress\n        ServerName edu.com\n        &lt;Directory /var/www/html/wordpress&gt;\n            Options Indexes FollowSymLinks\n            AllowOverride All\n            Require all granted\n        &lt;/Directory&gt;\n        ErrorLog ${APACHE_LOG_DIR}/error.log\n        CustomLog ${APACHE_LOG_DIR}/access.log combined\n&lt;/VirtualHost&gt;\" | sudo tee /etc/apache2/sites-available/wordpress.conf\n\n#Habilitamos el nuevo sitio de WordPress y el m\u00f3dulo de reescritura de Apache:\nsudo a2ensite wordpress.conf\nsudo a2enmod rewrite\n\n#Deshabilitamos el sitio predeterminado \u201cIt Works\u201d con:\nsudo a2dissite 000-default\n\n#Reiniciamos Apache para aplicar los cambios:\nsudo systemctl restart apache2.service\n\n#Comprobamos el estado\nsudo systemctl status apache2\n\nexit 0\n\n</code></pre>"},{"location":"Documento%20informativo/","title":"Pr\u00e1ctica 4 Instalar y configurar Wordpress","text":""},{"location":"Documento%20informativo/#paso-1-configurar-el-servidor-2-mysql","title":"PASO 1: Configurar el Servidor 2 (Mysql)","text":""},{"location":"Documento%20informativo/#actualizar-el-sistema-e-instalar-mysql","title":"Actualizar el sistema e instalar Mysql.","text":"<p><code>sudo apt update &amp;&amp; sudo apt upgrade -y</code></p>"},{"location":"Documento%20informativo/#instalar-mysql","title":"Instalar Mysql.","text":"<p><code>sudo apt install mysql-server</code></p>"},{"location":"Documento%20informativo/#acceder-a-mysql-como-administrador-root","title":"Acceder a Mysql como administrador root.","text":"<p><code>sudo mysql -u root</code></p>"},{"location":"Documento%20informativo/#crear-la-bbdd","title":"Crear la BBDD","text":"<p><code>CREATE DATABASE wordpress_db;</code></p> <p><code>CREATE USER 'wp_user'@'%' IDENTIFIED BY 'tu_contrase\u00f1a_segura';</code></p> <p><code>GRANT ALL PRIVILEGES ON wordpress_db.* TO 'wp_user'@'%';</code></p> <p><code>FLUSH PRIVILEGES;</code></p> <p><code>EXIT;</code></p> <p></p>"},{"location":"Documento%20informativo/#permitiremos-las-conexiones-remotas","title":"Permitiremos las conexiones remotas","text":"<p><code>sudo nano /etc/mysql/mysql.conf.d/mysqld.cnf</code></p> <p>Buscaremos la l\u00ednea que contiene <code>bind-address</code> y la cambiaremos de <code>127.0.0.1</code> a <code>0.0.0.0</code> para permitir conexiones desde cualquier direcci\u00f3n IP.</p> <p></p>"},{"location":"Documento%20informativo/#reiniciaremos-mysql","title":"Reiniciaremos Mysql","text":"<p><code>sudo systemctl restart mysql</code></p>"},{"location":"Documento%20informativo/#abriremos-el-puerto-mysql-3306-en-el-firewall","title":"Abriremos el puerto Mysql (3306) en el firewall","text":"<p><code>sudo ufw allow 3306</code></p> <p></p> <p>De esta forma, con un script descargamos mysql y el servidor queda listo para soportar una instalaci\u00f3n de WordPress, con acceso remoto a la BBDD si es necesario.</p> <p>Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p>"},{"location":"Documento%20informativo/#paso-2-instalar-apache-php-las-extensiones-necesarias-y-descargar-e-instalar-wordpress","title":"PASO 2: Instalar Apache, PHP, las extensiones necesarias y descargar e instalar Wordpress","text":""},{"location":"Documento%20informativo/#instalamos-apache-que-sera-el-servidor-web-donde-se-alojara-wordpress","title":"Instalamos Apache que ser\u00e1 el servidor web donde se alojar\u00e1 Wordpress.","text":"<p><code>sudo apt install apache2 -y</code></p>"},{"location":"Documento%20informativo/#instalamos-php-y-las-extensiones-necesarias","title":"Instalamos PHP y las extensiones necesarias.","text":"<p><code>sudo apt update</code></p> <p><code>sudo apt install apache2 ghostscript libapache2-mod-php</code></p> <p><code>sudo apt install php php-bcmath php-curl php-imagick php-intl</code></p> <p><code>sudo apt install php-json php-mbstring php-mysql php-xml php-zip</code></p>"},{"location":"Documento%20informativo/#reiniciamos-apache-para-que-los-cambios-surtan-efecto","title":"Reiniciamos apache para que los cambios surtan efecto.","text":"<p><code>sudo systemctl restart apache2.service</code></p>"},{"location":"Documento%20informativo/#descargamos-la-ultima-version-de-wordpress-y-colocamos-en-la-carpeta-web-de-apache","title":"Descargamos la \u00faltima versi\u00f3n de WordPress y colocamos en la carpeta web de Apache.","text":"<p><code>cd /tmp</code></p> <p><code>wget https://wordpress.org/latest.tar.gz</code></p> <p><code>tar -xzf latest.tar.gz</code></p> <p><code>sudo mv wordpress /var/www/html/</code></p>"},{"location":"Documento%20informativo/#cambiamos-la-propiedad-y-permisos-de-los-archivos","title":"Cambiamos la propiedad y permisos de los archivos.","text":"<p><code>sudo chown -R www-data:www-data /var/www/html/wordpress</code></p> <p><code>sudo chmod -R 755 /var/www/html/wordpress</code></p>"},{"location":"Documento%20informativo/#configurar-wordpress-para-conectarse-a-la-base-de-datos","title":"Configurar WordPress para conectarse a la base de datos.","text":"<p><code>cd /var/www/html/wordpress</code></p>"},{"location":"Documento%20informativo/#copiamos-el-archivo-de-configuracion","title":"Copiamos el archivo de configuraci\u00f3n.","text":"<p><code>cp wp-config-sample.php wp-config.php</code></p>"},{"location":"Documento%20informativo/#editamos-el-archivo-de-configuracion-de-wordpress","title":"Editamos el archivo de configuraci\u00f3n de WordPress.","text":"<p><code>sudo nano wp-config.php</code></p>"},{"location":"Documento%20informativo/#cambiamos-las-siguientes-lineas-para-apuntar-al-servidor-2-mysql-en-lugar-de-usar-localhost","title":"Cambiamos las siguientes l\u00edneas para apuntar al \"Servidor 2\" (MySQL) en lugar de usar \"localhost\".","text":"<p><code>define('DB_NAME', 'wordpress_db');     // Nombre de la base de datos</code></p> <p><code>define('DB_USER', 'wp_user');          // Usuario de la base de datos</code></p> <p><code>define('DB_PASSWORD', 'tu_contrase\u00f1a_segura'); // Contrase\u00f1a del usuario</code></p> <p><code>define('DB_HOST', 'IP_DEL_SERVIDOR_2'); // La IP del Servidor 2 (donde est\u00e1 MySQL)</code></p> <p></p>"},{"location":"Documento%20informativo/#configuramos-apache-para-wordpress-creando-un-archivo-de-configuracion-para-el-sitio-de-wordpress-en-apache","title":"Configuramos Apache para WordPress creando un archivo de configuraci\u00f3n para el sitio de WordPress en Apache.","text":"<p><code>sudo nano /etc/apache2/sites-available/wordpress.conf</code></p>"},{"location":"Documento%20informativo/#agregamos-lo-siguiente","title":"Agregamos lo siguiente:","text":"<pre><code>&lt;VirtualHost *:80&gt;\n    DocumentRoot /srv/www/wordpress\n    &lt;Directory /srv/www/wordpress&gt;\n        Options FollowSymLinks\n        AllowOverride Limit Options FileInfo\n        DirectoryIndex index.php\n        Require all granted\n    &lt;/Directory&gt;\n    &lt;Directory /srv/www/wordpress/wp-content&gt;\n        Options FollowSymLinks\n        Require all granted\n    &lt;/Directory&gt;\n&lt;/VirtualHost&gt;\n</code></pre>"},{"location":"Documento%20informativo/#luego-habilitamos-el-nuevo-sitio-de-wordpress-y-el-modulo-de-reescritura-de-apache","title":"Luego habilitamos el nuevo sitio de WordPress y el m\u00f3dulo de reescritura de Apache:","text":"<p><code>sudo a2ensite wordpress.conf</code> <code>sudo a2enmod rewrite</code></p>"},{"location":"Documento%20informativo/#deshabilitamos-el-sitio-predeterminado-it-works-con","title":"Deshabilitamos el sitio predeterminado \u201cIt Works\u201d con:","text":"<p><code>sudo a2dissite 000-default</code></p>"},{"location":"Documento%20informativo/#reiniciamos-apache-para-aplicar-los-cambios","title":"Reiniciamos Apache para aplicar los cambios:","text":"<p><code>sudo systemctl restart apache2</code></p>"},{"location":"Documento%20informativo/#paso-3-finalizamos-la-instalacion-de-wordpress","title":"Paso 3: Finalizamos la instalaci\u00f3n de WordPress","text":""},{"location":"Documento%20informativo/#abrimos-el-navegador-nos-dirigimos-a-la-direccion-ip-del-servidor-1-en-un-navegador-httpip_del_servidor_1","title":"Abrimos el navegador: Nos dirigimos a la direcci\u00f3n IP del \"Servidor 1\" en un navegador (<code>http://IP_DEL_SERVIDOR_1</code>)","text":"<p>  De esta forma con un script:</p> <ol> <li>Automatizamos la instalaci\u00f3n de Apache, PHP y WordPress.</li> <li>Configuramos una arquitectura distribuida con la base de datos en un servidor separado, mejorando rendimiento y seguridad.</li> <li>Optimizamos los recursos al permitir un mejor uso de la CPU y memoria en cada servidor.</li> </ol> <p>** Puedes ver el script aqu\u00ed</p> <p>Descargar el archivo</p>"},{"location":"Mysql-para-wordpress/","title":"Mysql para wordpress","text":"<pre><code>\n#!/bin/bash\n\n#Script para configurar una BBDD de mysql para Wordpress en un servidor aparte (nivel 2)\n\n#Instalaci\u00f3n de dialog\nsudo apt install dialog -y\n\n#Funci\u00f3n para capturar el c\u00f3digo de retorno del di\u00e1logo\nfunction acabar() {\n  exit_status=$?\n  # Verificar si se seleccion\u00f3 \"Cancelar\"\n  if [ $exit_status -ne 0 ]; then\n    clear\n    echo \"Operaci\u00f3n cancelada\"\n    exit 1\n  fi\n}\n\n#Actualizamos el sistema\ndialog --title \"Actualizaci\u00f3n del sistema update-upgrade\" \\\n  --yesno \"\u00bfActualizamos?\" 0 0\nsino=$?\nif [ $sino -eq 0 ]; then\n  clear\n  sudo apt update -y &amp;&amp; sudo apt dist-upgrade -y &amp;&amp; sudo apt autoremove -y\nfi\n\n#Instalaci\u00f3n MySQL\nsudo apt install mysql-server -y\n\nclear\n\n#Cambiamos la contrase\u00f1a del usuario root de mysql-server\npasswdmysqlroot=$(dialog --title \"Contrase\u00f1a inicial para root en mysql\" \\\n  --stdout \\\n  --inputbox \"Password (8 carac.mayus-minus-n\u00fam-signo)\" 0 50)\n#Llamo a la funcion:\nacabar\n\nsqlcomandos=\"alter user 'root'@'localhost' identified with caching_sha2_password by '$passwdmysqlroot';\nflush privileges;\"\n\n#Ejecutamos los comandos SQL en mysql\nsudo mysql -u root -e \"$sqlcomandos\"\n\n#Creamos una BBDD para Wordpress y un nuevo usuario con contrase\u00f1a en mysql-server tambien para Wordpress\nnombase=$(dialog --title \"Creamos BBDD para Wordpress\" \\\n  --stdout \\\n  --inputbox \"Nombre\" 0 0)\n#Llamo a la funcion:\nacabar\n\nnomuser=$(dialog --title \"Creamos el usuario\" \\\n  --stdout \\\n  --inputbox \"Nombre\" 0 0)\n#Llamo a la funcion:\nacabarEdu\n\npassuser=$(dialog --title \"Contrase\u00f1a para el nuevo usuario de Wordpress\" \\\n  --stdout \\\n  --inputbox \"Password (8 carac.mayus-minus-n\u00fam-signo)\" 0 50)\n#Llamo a la funcion:\nacabar\nclear\n\n#Ahora creamos una BBDD y un nuevo usuario para Wordpress\nsqlcomandosphp=\"create database $nombase; \ncreate user '$nomuser'@'%' identified with caching_sha2_password by '$passuser';\nGRANT ALL PRIVILEGES ON *.* TO '$nomuser'@'%';\nflush privileges;\"\n\n#Ejecutamos los comandos SQL en mysql\nsudo mysql -u root -p\"$passwdmysqlroot\" -e \"$sqlcomandosphp\"\n\n#Permitir conexiones remotas habilitando el acceso a Mysql\nsudo sed -i \"31s/.*/bind-address            = 0.0.0.0/\" /etc/mysql/mysql.conf.d/mysqld.cnf\nsudo systemctl restart mysql.service\n\n#abrir el puerto de Mysql (3306) en el firewallwpedu\nsudo ufw enable\nsudo ufw allow 3306\nsudo ufw status\n\nexit 0\n\n</code></pre>"}]}